<?xml version="1.0" encoding="utf-8"?>


<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
    <title type="text">Hai&#39;s Teatime</title>
    <subtitle type="html">我的第一个博客，记录了一些学习随笔。</subtitle>
    <updated>2020-01-31T20:01:11+08:00</updated>
    <id>http://hais-teatime.com/</id>
    <link rel="alternate" type="text/html" href="http://hais-teatime.com/" />
    <link rel="self" type="application/atom+xml" href="http://hais-teatime.com/atom.xml" />
    <author>
            <name>Harvey Zhang</name>
            <uri>http://hais-teatime.com/</uri>
            
                <email>Hyuain97@163.com</email>
            </author>
    <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    <generator uri="https://gohugo.io/" version="0.63.2">Hugo</generator>
        <entry>
            <title type="text">新的笔记本</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2020-01-29-new-blog/" />
            <id>http://hais-teatime.com/post/2020-01-29-new-blog/</id>
            <updated>2020-01-29T16:16:24+08:00</updated>
            <published>2020-01-29T16:03:43+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[以前一直用的 Notion 做笔记，感觉体验很不错，这几天复习一下基础知识，顺便把笔记都搬家啦。]]></summary>
            
                <content type="html"><![CDATA[<p>以前一直用的 Notion 做笔记，感觉体验很不错，这几天复习一下基础知识，顺便把笔记都搬家啦。</p>

<p>因为 Notion 每个月要收 5 美刀（有点小贵），现在试用的两个月快完了，得赶紧把笔记给换个地方存起来，于是新建了一个博客专门用来放笔记哦。</p>

<p>链接在这里：<a href="https://hais-teatime.com/hais-notebook/" target="_blank">小海的笔记本</a></p>

<p>同时这个博客里面的笔记性质的文章也将会全部移动到新的笔记本中，新的笔记本使用了自带的搜索插件，也有很棒的分类系统，可以很方便地找到以前的东西哦。</p>

<p>但是所谓笔记本，就是到处抄抄抄得来的东西，因此，不允许用作商业用途，目前笔记的来源包括但不限于：</p>

<p>饥人谷的内容、腾讯课堂的内容、慕课网的内容、各类文档、各种博客、各种百科资料、互联网上的公开内容等等，为避免法律纠纷，在这里特别说明一下。当然一般是不会一字未动复制粘贴过来的，也不会出现大段的课件、PPT 等原版资料。</p>

<p>与此同时这个博客将会更多专注于原创的内容，可能不久之后也会 Renew 一下。</p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/vue/" term="Vue" label="Vue" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E9%A1%B9%E7%9B%AE/" term="项目" label="项目" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">小项目：前端导航页面 - 维生素导航·Vue</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2020-01-16-navigation-vue/" />
            <id>http://hais-teatime.com/post/2020-01-16-navigation-vue/</id>
            <updated>2020-01-28T21:15:51+08:00</updated>
            <published>2020-01-16T17:14:39+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[初学 Vue，将第一个项目——用 jQuery 和原生 CSS 所做的一个导航页面——给 Renew 了一下。点击可以查看 代码仓库 和 效果预览。]]></summary>
            
                <content type="html"><![CDATA[<p>初学 Vue，将第一个项目——用 jQuery 和原生 CSS 所做的一个导航页面——给 Renew 了一下。点击可以查看 <a href="https://github.com/Hyuain/navigation-vue" target="_blank">代码仓库</a> 和 <a href="http://hais-teatime.com/navigation-vue" target="_blank">效果预览</a>。</p>

<h1 id="功能介绍">功能介绍</h1>

<p>目前维生素导航主要分为两个部分：<strong>搜索框</strong> 和 <strong>网页导航</strong>。</p>

<p>在上方的搜索框中输入文字可以使用对应的搜索引擎进行搜索，目前内置三款搜索引擎：Google、百度、Bing，默认为 Google。</p>

<p>点击下方的网页收藏可以进入到对应的页面，目前已经内置了一些默认的页面。</p>

<p>鼠标浮动到图标上会出现删除按钮，点击可以将网页删除；移动设备长按会弹出删除框，点击中间的红色小叉叉也可以删除网页。</p>

<p>点击 <strong>'+'</strong> 会弹出新增网页的对话框，可以输入网页的名称和 URL；若没有输入名称，则将默认使用域名作为名称。然后会自动请求图标，若图标请求失败，将会使用名称的第一个字符作为网页的图标。</p>

<p>网站的信息是存储在 LocalStorage 中的，所以清除历史记录的操作会清空之前添加的网站。</p>

<h1 id="在项目中学习">在项目中学习</h1>

<h2 id="搜索框">搜索框</h2>

<h3 id="1-如何实现三个不同搜索引擎的切换">1. 如何实现三个不同搜索引擎的切换？</h3>

<p>首先想到的是通过 <code>v-if</code> 来实现，设置一个变量 <code>searchEngine</code>，点到对应的搜索引擎的时候就将 <code>searchEngine</code> 变为对应的值。</p>

<p>那么怎样知道被点击的是哪一个图标呢？好在我们的图标比较少，在 <code>@click</code> 的点击事件中，我们可以在 <code>$event</code> 之后再传入一个参数，用来表示搜索引擎即可。</p>

<p>这样最简单的切换效果就实现了。</p>

<p>但是我们想再加一点过渡效果，Vue 为我们准备了在 <code>v-if</code> 切换出现和消失的时候可以使用的过渡 API。但是简单的使用之后发现一个问题，由于点击切换标签之间实际上是无间隔的，<code>v-if</code> 值为 <code>false</code> 之后就会马上消失，值为 <code>true</code> 的时候又会马上出现，但是动画是需要时间的（进入和退出都有时间），这就导致页面上可能同时出现好几个 LOGO，会变得非常混乱；同时因为 LOGO 在 DOM 中是有上下顺序的，所以按照 DOM 结构从上到下点是正常的，但是如果倒着点就会出现 BUG。</p>

<p>因此，我设计了这样的逻辑：</p>

<p>当我们点击切换搜索引擎时——</p>

<ol>
<li>立即清除之前的计时器；</li>
<li>立即置空 <code>searchEngine</code>（原来的 LOGO 退出 DOM）；</li>

<li><p>延迟 <code>400ms</code> 为 <code>searchEngine</code> 赋新值（新的 LOGO 进入 DOM），并记下计时器的 <code>timerID</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">changeSearchEngine</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">clearTimeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">)</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">searchEngine</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">searchEngine</span> <span class="o">=</span> <span class="nx">value</span>
  <span class="p">}</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ol>

<h2 id="网页列表">网页列表</h2>

<h3 id="1-如何实现移动端的长按效果">1. 如何实现移动端的长按效果？</h3>

<p>由于网页组件本身就已经比较大了，而且为了通过练习加深对 Vue 的熟悉，我选择将长按效果封装成一个指令来实现，在这里我使用的是全局组件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// longpress.js
</span><span class="c1"></span>    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
      <span class="nx">install</span><span class="p">(</span><span class="nx">Vue</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">time</span><span class="o">:</span> <span class="mi">1000</span>
      <span class="p">}</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;longpress&#39;</span><span class="p">,</span> <span class="p">{</span>
          <span class="nx">bind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">binding</span><span class="p">,</span> <span class="nx">vnode</span><span class="p">,</span> <span class="nx">oldVnode</span><span class="p">)</span> <span class="p">{</span>
          <span class="p">}</span>
        <span class="p">}</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>

<span class="c1">// main.js
</span><span class="c1"></span>    <span class="kr">import</span> <span class="nx">LongPress</span> <span class="nx">from</span> <span class="s1">&#39;...&#39;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">LongPress</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">time</span><span class="o">:</span> <span class="mi">350</span>
    <span class="p">}</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="c">&lt;!--</span><span class="c"> MyComponent.vue</span><span class="c">--&gt;</span>
    <span class="nt">&lt;template</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-longpress=</span><span class="s">&#34;doSomething&#34;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/template&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>指令的钩子函数包含 <code>el</code>、<code>binding</code>、<code>vnode</code>、<code>oldVnode</code> 这四个参数，指令 <code>v-longpress</code> 的主要部分将会用到 <code>el</code> 和 <code>binding</code>：通过 <code>el</code> 我可以获取到指令绑定的元素，也就是现在正在被长按的元素；通过 <code>binding.value</code> 我可以获取到指令的绑定值，这里 Vue 会自动识别我的绑定值，我们可以让他绑定值为一个回调函数，在指令中来调用这个函数。</p>

<p>在移动端，我们主要依靠 <code>touchstart</code> <code>touchend</code> <code>touchmove</code> <code>touchcancel</code> 来监听触摸状态。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// pressTimer 变量用来存放计时器的 ID
</span><span class="c1"></span>    <span class="kd">let</span> <span class="nx">pressTimer</span> <span class="o">=</span> <span class="kc">null</span>

<span class="c1">// longPress 变量用来标记是否是长按
</span><span class="c1"></span>    <span class="kd">let</span> <span class="nx">longPress</span> <span class="o">=</span> <span class="kc">false</span>

<span class="c1">// handler 函数用来执行回调函数
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">handler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">el</span><span class="p">)</span>
    <span class="p">}</span>

<span class="c1">// start 用来启动长按事件：options.time 的时间之后触发 handler
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">start</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">(</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;click&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">pressTimer</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">pressTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="nx">handler</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
          <span class="nx">longPress</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="p">}</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">time</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>

<span class="c1">// cancel 用来取消长按事件：清除计时器
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">cancel</span> <span class="o">=</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">pressTimer</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">pressTimer</span><span class="p">)</span>
        <span class="nx">pressTimer</span> <span class="o">=</span> <span class="kc">null</span>
        <span class="nx">longPress</span> <span class="o">=</span> <span class="kc">false</span>
      <span class="p">}</span>
    <span class="p">}</span>

<span class="c1">// 绑定事件
</span><span class="c1"></span><span class="c1">// touchstart 触发长按
</span><span class="c1"></span>    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="nx">start</span><span class="p">)</span>
<span class="c1">// touchend 时进行判断，是长按还是短按，短按则触发 click 事件
</span><span class="c1"></span>    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">pressTimer</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">longPress</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="p">)</span>
     <span class="p">}</span>
      <span class="nx">cancel</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
    <span class="p">}</span><span class="p">)</span>
<span class="c1">// touchcancel 和 touchmove 时取消长按事件
</span><span class="c1"></span>    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchcancel&#39;</span><span class="p">,</span><span class="nx">cancel</span><span class="p">)</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span><span class="nx">cancel</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>
<h3 id="2-如何获取网页的-icon">2. 如何获取网页的 ICON ？</h3>

<p>这一步实际上是在添加网页的对话框组件中实现的，在输入的 URL 进行处理之后，将得到 <code>https://domain</code>，先直接在其后面加上 <code>/favicon.ico</code> 作为其 ICON。在这之前其实也尝试了一些网络上的 API，但是效果其实都不太好，跟直接用 <code>/favicon.ico</code> 获取到的差别不大，并且最终图片也不是很大，不需要清晰度特别高。</p>

<p>然后在网页组件列表组件中直接作为 <code>&lt;img/&gt;</code> 的 <code>src</code> 尝试获取，若失败再通过 <code>@error=&quot;handelIcoError&quot;</code> 来调用函数进行处理，替换成文本。</p>

<h2 id="添加网页对话框">添加网页对话框</h2>

<h3 id="1-如何呼出对话框">1. 如何呼出对话框？</h3>

<p>为了减小组件的逻辑复杂性，我并没有将对话框组件放在网页列表组件之中，而是设计成了第三个平行的组件，当网页列表中的 <strong>'+'</strong> 被点击时，网页列表通过 <code>eventBus</code> 将 <code>addFormOpen</code> 置为 <code>true</code>，从而打开对话框。</p>

<p>我是这样使用 <code>eventBus</code> 的：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// App.vue
</span><span class="c1"></span>    <span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>  
    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
      <span class="nx">data</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="nx">eventBus</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="p">{</span>
            <span class="nx">data</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">{</span>
                <span class="nx">addFormOpen</span><span class="o">:</span> <span class="kc">false</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span><span class="p">)</span><span class="p">,</span>
        <span class="p">}</span>
      <span class="p">}</span><span class="p">,</span>
      <span class="nx">provide</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="nx">eventBus</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventBus</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

<span class="c1">// MyComponent.vue
</span><span class="c1"></span>    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
      <span class="nx">inject</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;eventBus&#39;</span><span class="p">]</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>当对话框确认提交时，他将 <code>addFormOpen</code> 置为 <code>false</code>，并且将信息通过 <code>eventBus</code> 传给网页列表组件。</p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/vue/" term="Vue" label="Vue" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E9%A1%B9%E7%9B%AE/" term="项目" label="项目" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">小项目：多人共享博客 - Sharing Garden</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2020-01-15-sharing-garden/" />
            <id>http://hais-teatime.com/post/2020-01-15-sharing-garden/</id>
            <updated>2020-01-29T10:09:34+08:00</updated>
            <published>2020-01-15T09:57:43+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[初学 Vue，一直想给女朋友搞一个博客，不过目前还太会数据库之类的东西，先学习一下多人共享博客的前端页面是如何搭建的，用 Vue 做了一个单页单页应用。点击可以查看 代码仓库 和 效果预览。]]></summary>
            
                <content type="html"><![CDATA[<p>初学 Vue，一直想给女朋友搞一个博客，不过目前还太会数据库之类的东西，先学习一下多人共享博客的前端页面是如何搭建的，用 Vue 做了一个单页单页应用。点击可以查看 <a href="https://github.com/Hyuain/kates-blog-client" target="_blank">代码仓库</a> 和 <a href="http://hais-teatime.com/kates-blog-client" target="_blank">效果预览</a>。</p>

<h1 id="项目介绍">项目介绍</h1>

<p>Sharing Garden 一共有这样几个页面：首页、注册页、登录页、我的页面、用户页面、博客详情、新建博客、编辑博客。</p>

<p>项目通过 Vue-Router 来进行前端页面的跳转，用 Vuex 存储用户数据</p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/vue/" term="Vue" label="Vue" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E9%A1%B9%E7%9B%AE/" term="项目" label="项目" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">Vue 中 computed 和 watch 的区别</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-12-25-vue-2/" />
            <id>http://hais-teatime.com/post/2019-12-25-vue-2/</id>
            <updated>2020-01-31T19:59:44+08:00</updated>
            <published>2019-12-25T18:32:33+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[聊聊 options 中的 computed 和 watch。]]></summary>
            
                <content type="html"><![CDATA[<p>聊聊 options 中的 computed 和 watch。</p>

<hr />

<h2 id="key-points">Key Points</h2>

<ol>
<li>computed 是用来计算一个值的，跟 getter-setter 用法差不多，调用的时候不需要加括号</li>
<li>computed 有缓存，如果依赖的值没有改变，那么他也不会进行重新计算</li>
<li>watch 是异步的，必要时使用 <code>Vue.nextTick(callback)</code></li>
<li>watch 有 immediate 和 deep 这两个选项</li>
<li>watch 侦听变化的规则是 <code>===</code> 规则，简单类型看值，对象看地址</li>
</ol>

<hr />

<blockquote>
<p>可参考：
<a href="https://cn.vuejs.org/v2/api/#computed" target="_blank">Vue 文档 - computed</a>；
<a href="https://cn.vuejs.org/v2/api/#watch" target="_blank">Vue 文档 - watch</a></p>
</blockquote>

<h2 id="computed">computed</h2>

<p><code>computed</code> 其实跟我们之前讨论的 getter-setter 属性在形式上比较像，下面代码中的 <code>displayName</code> 就是计算属性。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="p">{</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">user</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">email</span><span class="o">:</span> <span class="s2">&#34;harvey@example.com&#34;</span><span class="p">,</span>
      <span class="nx">nickname</span><span class="o">:</span> <span class="s2">&#34;hai&#34;</span><span class="p">,</span>
      <span class="nx">phone</span><span class="o">:</span> <span class="s1">&#39;1234567890&#39;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">computed</span><span class="o">:</span><span class="p">{</span> <span class="c1">// 能够将计算而来的属性作为属性
</span><span class="c1"></span>    <span class="nx">displayName</span><span class="p">(</span><span class="p">)</span><span class="p">{</span> <span class="c1">// 只读
</span><span class="c1"></span>      <span class="kr">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">user</span>
      <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nx">nickname</span> <span class="o">||</span> <span class="nx">user</span><span class="p">.</span><span class="nx">email</span> <span class="o">||</span> <span class="nx">user</span><span class="p">.</span><span class="nx">phone</span>
    <span class="p">,</span>
    <span class="c1">// 或者写成：
</span><span class="c1"></span>    <span class="nx">displayName</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// 存取
</span><span class="c1"></span>      <span class="nx">get</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
        <span class="kr">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">user</span>
        <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nx">nickname</span> <span class="o">||</span> <span class="nx">user</span><span class="p">.</span><span class="nx">email</span> <span class="o">||</span> <span class="nx">user</span><span class="p">.</span><span class="nx">phone</span>
      <span class="p">}</span><span class="p">,</span>
      <span class="nx">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span><span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">nickname</span> <span class="o">=</span> <span class="nx">value</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">template</span><span class="o">:</span><span class="sb">`</span><span class="sb">
</span><span class="sb">    &lt;div&gt;
</span><span class="sb">      {{displayName}}
</span><span class="sb">    &lt;/div&gt;
</span><span class="sb">  </span><span class="sb">`</span>
<span class="p">}</span><span class="p">)</span><span class="p">.</span><span class="nx">$mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>
<p>这里要注意的是，<code>computed</code> 是有缓存的，如果 <code>computed</code> 依赖的属性没有变化，那么就不会重新计算；而 getter-setter 默认是不会做缓存的。</p>

<h2 id="watch">watch</h2>

<p>简单来说，watch 就是观察到变化之后就执行一段函数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="p">{</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">b</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">c</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="nx">d</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nx">e</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">f</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">g</span><span class="o">:</span> <span class="mi">5</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">oldVal</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;new: %s, old: %s&#39;</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">oldVal</span><span class="p">)</span>
    <span class="p">}</span><span class="p">,</span>
    <span class="nx">b</span><span class="o">:</span> <span class="s1">&#39;someMethod&#39;</span><span class="p">,</span>
    <span class="nx">c</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">handler</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">oldVal</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span><span class="p">,</span>
      <span class="nx">deep</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">// 这个可以使得监听到内部数据的变化，如果里面变了，那么就触发
</span><span class="c1"></span>    <span class="p">}</span><span class="p">,</span>
    <span class="nx">d</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">handler</span><span class="o">:</span> <span class="s1">&#39;someMethod&#39;</span><span class="p">,</span> <span class="c1">// 使用什么方法
</span><span class="c1"></span>      <span class="nx">immediate</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">// 在侦听开始之后被立即调用
</span><span class="c1"></span>    <span class="p">}</span><span class="p">,</span>
    <span class="nx">e</span><span class="o">:</span> <span class="p">[</span>
      <span class="s1">&#39;handle1&#39;</span><span class="p">,</span>
      <span class="kd">function</span> <span class="nx">handle2</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">oldVal</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="nx">handler</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">handle3</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">oldVal</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span><span class="p">,</span>
        <span class="cm">/* ... */</span>
      <span class="p">}</span>
    <span class="p">]</span><span class="p">,</span>
    <span class="c1">// watch vm.e.f&#39;s value: {g: 5}
</span><span class="c1"></span>    <span class="s1">&#39;e.f&#39;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">oldVal</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span><span class="p">)</span>
<span class="nx">vm</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1">// =&gt; new: 2, old: 1
</span></code></pre></td></tr></table>
</div>
</div>
<p><strong>注意：不要使用箭头函数来定义 watcher，<code>this</code> 是 <code>window</code></strong>，事实上，在 Vue 的很多地方（比如 data、computed 等)，都是不推荐使用箭头函数的，因为这样会使得函数中的 this 没有值，至于为什么没有值，可以参考 <a href="http://hais-teatime.com/post/再看this/" target="_blank">这篇文章</a>。</p>

<p><strong>注意：Vue 在更新 DOM 时是异步执行的。</strong></p>

<blockquote>
<p>只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。Vue 在内部对异步队列尝试使用原生的 Promise.then、MutationObserver 和 setImmediate，如果执行环境不支持，则会采用 setTimeout(fn, 0) 代替。</p>

<p>例如，当你设置 <code>vm.someData = 'new value'</code>，该组件不会立即重新渲染。当刷新队列时，组件会在下一个事件循环“tick”中更新。多数情况我们不需要关心这个过程，但是如果你想基于更新后的 DOM 状态来做点什么，这就可能会有些棘手。虽然 Vue.js 通常鼓励开发人员使用“数据驱动”的方式思考，避免直接接触 DOM，但是有时我们必须要这么做。为了在数据变化之后等待 Vue 完成更新 DOM，可以在数据变化之后立即使用 Vue.nextTick(callback)。这样回调函数将在 DOM 更新完成后被调用。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="p">{</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s1">&#39;#example&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;123&#39;</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">template</span><span class="o">:</span> <span class="sb">`</span><span class="sb">
</span><span class="sb">    &lt;div id=&#34;example&#34;&gt;{{message}}&lt;/div&gt;
</span><span class="sb">  </span><span class="sb">`</span>
<span class="p">}</span><span class="p">)</span>
<span class="nx">vm</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s1">&#39;new message&#39;</span> <span class="c1">// 更改数据
</span><span class="c1"></span><span class="nx">vm</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">===</span> <span class="s1">&#39;new message&#39;</span> <span class="c1">// false
</span><span class="c1"></span><span class="nx">Vue</span><span class="p">.</span><span class="nx">nextTick</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">vm</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">===</span> <span class="s1">&#39;new message&#39;</span> <span class="c1">// true
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/vue/" term="Vue" label="Vue" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">理解 Vue 的 data 与 响应式</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-12-25-vue-1/" />
            <id>http://hais-teatime.com/post/2019-12-25-vue-1/</id>
            <updated>2020-01-31T19:59:15+08:00</updated>
            <published>2019-12-25T16:30:24+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[聊聊 options 中的 data。]]></summary>
            
                <content type="html"><![CDATA[<p>聊聊 options 中的 data。</p>

<hr />

<h2 id="key-points">Key Points</h2>

<ol>
<li>Vue 的 data 是响应式的，如果改变 data，那么 UI 就会刷新</li>
<li>Vue 2 通过 Object.defineProperty 实现数据响应式</li>
<li>Vue 2 会将原来的属性变为 getter-setter 属性，并创建一个代理来操纵数据</li>
</ol>

<hr />

<blockquote>
<p>可参考：
<a href="https://cn.vuejs.org/v2/api/#data" target="_blank">Vue 文档 - data</a>；
<a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank">Vue 文档 - 深入解响应式原理</a>；
<a href="https://cn.vuejs.org/v2/guide/list.html#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" target="_blank">Vue 文档 - 列表渲染</a></p>
</blockquote>

<h2 id="getter-和-setter">getter 和 setter</h2>

<p>由于 getter 和 setter 是 Vue 数据响应式中运用到的非常重要的一环，我们得先把这两个东西搞清楚。</p>

<p>通过下面这段代码，我们可以很清楚地了解到 get 和 set 其实就是两个函数：get 返回了一个拼凑的字符串，set 则修改了 person 内部的 firstName 和 lastName 两个真实存在的属性——但是这两个函数的定义和调用稍稍有点特别。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Harvey&#39;</span><span class="p">,</span>
  <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Zhang&#39;</span><span class="p">,</span>
  <span class="nx">get</span> <span class="nx">name</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// getter
</span><span class="c1"></span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">set</span> <span class="nx">name</span><span class="p">(</span><span class="nx">newName</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// setter
</span><span class="c1"></span>    <span class="nx">newName</span> <span class="o">=</span> <span class="nx">newName</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">newName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">newName</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="p">}</span><span class="p">,</span> 
  <span class="nx">age</span><span class="o">:</span> <span class="mi">18</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;name： &#39;</span> <span class="o">+</span> <span class="nx">person</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="c1">// 这就是 getter，我们在调用的时候不需要再使用 obj.name()
</span><span class="c1"></span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;Kate Wu&#39;</span> <span class="c1">// 这就是 setter，用 = &#39;xxx&#39; 触发 set 函数
</span></code></pre></td></tr></table>
</div>
</div>
<p>我们可以看到 <code>person</code> 中的 <code>name</code> 表示得有点特别，事实上他并不是一个真实存在的属性。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="p">(</span><span class="p">...</span><span class="p">)</span><span class="p">,</span> <span class="c1">// name 不是一个真实的属性，但我们确实可以读写 name
</span><span class="c1"></span>  <span class="nx">firstName</span><span class="o">:</span> <span class="s2">&#34;Kate&#34;</span><span class="p">,</span>
  <span class="nx">lastName</span><span class="o">:</span> <span class="s2">&#34;Wu&#34;</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
  <span class="nx">get</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="nx">name</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
  <span class="nx">set</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="nx">name</span><span class="p">(</span><span class="nx">newName</span><span class="p">)</span><span class="p">,</span>
  <span class="nx">__proto__</span><span class="o">:</span> <span class="nb">Object</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<h2 id="object-defineproperty">Object.defineProperty</h2>

<p>我们可以使用 <code>Object.defineProperty()</code> 方法来给对象上定义一个新属性，或者修改一个对象的现有属性，并返回这个对象，详细的用法可以参照 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty]" target="_blank">MDN 文档</a>，我们这里只介绍影响后续理解的部分。</p>

<p>基本语法是：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js">  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">descriptor</span><span class="p">)</span>
<span class="c1">// Object.defineProperty
</span><span class="c1"></span><span class="c1">// (要在上面定义属性的对象, 要定义或修改的属性的名称, 将被定义或修改的属性描述符)
</span></code></pre></td></tr></table>
</div>
</div>
<p>这里需要介绍一个概念—— <strong>描述符</strong>。目前我们的描述符有两种：<strong>数据描述符</strong> 和 <strong>存取描述符</strong>。</p>

<ul>
<li><p><strong>数据描述符</strong> 是一个具有值的属性，该值可能是可写的，也可能不是可写的——也就是类似于我们常见的那种普通属性。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span>
    
<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span><span class="mi">0</span>
  <span class="c1">// 数据描述符，这里的意思是：给 data 定义一个新属性 n，他的值为 0
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div></li>

<li><p><strong>存取描述符</strong> 是由 getter-setter 函数对描述的属性——也就是上文说的并不真实存在的属性。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span>
    
<span class="nx">data</span><span class="p">.</span><span class="nx">_n</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">// _n 用来存实际上不存在的 n 的值
</span><span class="c1"></span>    
<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">get</span><span class="p">(</span><span class="p">)</span><span class="p">{</span> <span class="c1">// getter-setter 函数是存取描述符，可以用来在存取的时候做校验
</span><span class="c1"></span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_n</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span><span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_n</span> <span class="o">=</span> <span class="nx">value</span>
  <span class="p">}</span>
<span class="p">}</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<p>至此，我们学会了使用 getter-setter 来为函数新增属性，但是我们可能还需要借助代理，并且监听原来的属性来防止直接对 <code>this._n</code> 进行篡改。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js">    <span class="kd">let</span> <span class="nx">myData</span> <span class="o">=</span> <span class="p">{</span><span class="nx">n</span><span class="o">:</span> <span class="mi">0</span><span class="p">}</span>
    <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">proxy</span><span class="p">(</span><span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">myData</span> <span class="p">}</span><span class="p">)</span> <span class="c1">// data 即为 myData 代理
</span><span class="c1"></span>    
    <span class="kd">function</span> <span class="nx">proxy</span><span class="p">(</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 解构赋值，data 即为 myData，即为 {n: 0}
</span><span class="c1"></span>      <span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">n</span> <span class="c1">// 存下 n 原来的值
</span><span class="c1"></span>      <span class="k">delete</span> <span class="nx">data</span><span class="p">.</span><span class="nx">n</span> <span class="c1">// 删除掉 data 中原来的 n，这句可以不用写，因为下面声明新的虚拟 n 的时候会删掉之前的
</span><span class="c1"></span>      <span class="c1">// 声明一个虚拟的 n，放到 myData 上面，防止直接修改 myData（监听 myData）
</span><span class="c1"></span>      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">get</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
          <span class="k">return</span> <span class="nx">value</span>
        <span class="p">}</span><span class="p">,</span>
        <span class="nx">set</span><span class="p">(</span><span class="nx">newValue</span><span class="p">)</span><span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">newValue</span>
        <span class="p">}</span>
      <span class="p">}</span><span class="p">)</span>
      <span class="c1">// 声明代理
</span><span class="c1"></span>      <span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span>
      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">get</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
          <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">n</span>
        <span class="p">}</span>
        <span class="nx">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span><span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">value</span>
        <span class="p">}</span>
      <span class="p">}</span><span class="p">)</span>
      <span class="k">return</span> <span class="nx">obj</span> <span class="c1">// obj 就是代理
</span><span class="c1"></span>    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<h2 id="vue-中是怎么做的">Vue 中是怎么做的</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">myData</span> <span class="p">}</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>
<p>从原理上讲其实是差不多的，Vue 拿到我们传入的 myData 之后，做了这么几件事情：</p>

<ol>
<li>让 <code>vm</code> 成为 <code>myData</code> 的代理，以后我们用 <code>vm.xxx</code> 或者 <code>this.xxx</code> 就可以直接操作原来在 <code>myData</code> 中的数据了；</li>
<li>删除掉 <code>myData</code> 上原来的所有属性，并改成 getter-setter 属性，防止 myData 上面的属性被越过 <code>vm</code> 直接篡改；</li>
<li>这么做的好处是可以让 <code>vm</code> 知道属性变化之后触发 <code>render</code></li>
</ol>

<p><img src="https://cn.vuejs.org/images/data.png" alt="Vue-data" /></p>

<h3 id="问题">问题</h3>

<p>事实上因为 <code>Object.defineProperty()</code> 其实是有一些问题的，因此 Vue 中也会存在这些问题，尽管 Vue 已经对他们进行了处理，但仍然应当注意。</p>

<ul>
<li><p>如果最开始属性不存在，后来想要加属性，那么新加的属性就没有被 getter-setter 化，因此就不具备响应式。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="p">{</span>
<span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">a</span><span class="o">:</span> <span class="mi">1</span>
<span class="p">}</span>
<span class="p">}</span><span class="p">)</span>

<span class="nx">vm</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="c1">// vm.b 不是响应式的
</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<p>解决方法：要么最开始就把所有的属性名写好，要么就使用 <code>Vue.set(this.obj, 'key', 'value')</code> 或者 <code>vm.$set(this.obj, 'key', value)</code> 来添加新的属性。</p>

<ul>
<li>对于数组来说，使用 <code>arr[index] = value</code> 来添加值将同样不会被检测到。</li>
</ul>

<p>解决办法：Vue 实际上已经给我们的数组加上了一层新的原型，并提供了 <code>push</code> <code>pop</code> <code>shift</code> <code>unshift</code> <code>splice</code> <code>sort</code> <code>reverse</code> 这个 7 个常用的 API。</p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/vue/" term="Vue" label="Vue" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">再看 this</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-12-24-this/" />
            <id>http://hais-teatime.com/post/2019-12-24-this/</id>
            <updated>2020-01-28T11:35:42+08:00</updated>
            <published>2019-12-24T18:27:04+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[学完了整个 JavaScript 基础篇章之后，今天重新总结复习一下 this 的用法。]]></summary>
            
                <content type="html"><![CDATA[<p>学完了整个 JavaScript 基础篇章之后，今天重新总结复习一下 this 的用法。</p>

<p>除了绕晕新手以外，<code>this</code> 还是有其存在的价值，如果没有 <code>this</code>，那么我们在写一个构造函数的时候，就不知道如何代指我们即将 <code>new</code> 出来的对象（因为事实上这个时候他并没有名字）。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">?</span><span class="o">?</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span>
  <span class="o">?</span><span class="o">?</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>但是实际上 <code>this</code> 却带来了很多副作用以及意想不到的用法，因此下面就来总结讨论一下 this 的值。</p>

<hr />

<h2 id="key-points">Key Points</h2>

<ol>
<li><code>this</code> 是为了解决 <strong>一个函数获取一个对象的引用</strong> 这个问题</li>
<li><code>this</code> 必须在函数体的内部才有意义，否则等于 <code>window</code></li>
<li>可以对函数内的 <code>this</code> 进行 <strong>隐式指定</strong> 和 <strong>显式指定</strong></li>
<li>箭头函数 <strong>没有</strong> <code>this</code></li>
<li><code>new</code> 之后发生的 4 件事情</li>
</ol>

<hr />

<h2 id="函数体外部的-this">函数体外部的 this</h2>

<blockquote>
<p><code>this</code> 必须在函数体的内部才有意义</p>
</blockquote>

<p>如果 <code>this</code> 不在任何函数体内部的话，他的值是全局对象，当然在浏览器中就是 <code>window</code>，因此如果不在函数体内部的话，就无从讨论 <code>this</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="s1">&#39;Hi&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="c1">// &#39;Hi&#39;
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="c1">// &#39;Hi&#39;
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="c1">// &#39;Hi&#39;
</span><span class="c1"></span><span class="c1">// window === this
</span><span class="c1"></span><span class="c1">// window.a === this.a === a
</span></code></pre></td></tr></table>
</div>
</div>
<p>注意了！这里说的函数体内部要与函数的调用区分开来！最显然的是上面的 <code>console.log(this.a)</code> 的括号中的 <code>this</code> <strong>并不是函数体内部的 <code>this</code></strong>，所以他也是没有意义的。</p>

<h2 id="函数体内部的-this">函数体内部的 this</h2>

<blockquote>
<p>函数内部 <code>this</code> 的值取决于函数被调用的方式</p>
</blockquote>

<p>我们有两种方式可以调用函数并指定 this 的值：<strong>隐式指定</strong> 和 <strong>显式指定</strong>。</p>

<p>举个栗子，我们有这样一个对象：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">harvey</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;harvey&#39;</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mi">22</span><span class="p">,</span>
  <span class="nx">greeting</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">Hello, I am </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>然后想要调用其中的 <code>greeting()</code> 方法，我们可以 <strong>隐式指定</strong> <code>this</code> 的值：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">harvey</span><span class="p">.</span><span class="nx">greeting</span><span class="p">(</span><span class="p">)</span>
<span class="c1">// &#39;Hello, I am harvey&#39;
</span><span class="c1"></span><span class="c1">// JS 自动指定 greeting 函数里面的 this 为 . 前面的 harvey 
</span></code></pre></td></tr></table>
</div>
</div>
<p>我们也可以 <strong>显式指定</strong> <code>this</code> 的值：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">harvey</span><span class="p">.</span><span class="nx">greeting</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">harvey</span><span class="p">)</span>
<span class="c1">// &#39;Hello, I am harvey&#39;
</span><span class="c1"></span><span class="c1">// 通过 call 指定 greeting 中的 this 是 harvey
</span></code></pre></td></tr></table>
</div>
</div>
<p>看起来好像没什么区别？不，区别大了。</p>

<p>让我们再定义一个对象，就能看出其中的端倪。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">kate</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;kate&#39;</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mi">22</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>我们现在可以这样调用 <code>harvey</code> 的 <code>greeting</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">harvey</span><span class="p">.</span><span class="nx">greeting</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">kate</span><span class="p">)</span>
<span class="c1">// &#39;Hello, I am kate&#39;
</span><span class="c1"></span><span class="c1">// 通过 call 指定 greeting 中的 this 是 kate
</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="箭头函数的-this">箭头函数的 this</h2>

<blockquote>
<p>箭头函数没有 <code>this</code></p>
</blockquote>

<p>如果我们把上面讨论的栗子中的函数改为箭头函数，那么他里面的 <code>this</code> 也就没有意义了，他的 <code>this</code> 具体的取值得向上一个函数找：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">harvey</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;harvey&#39;</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mi">22</span><span class="p">,</span>
  <span class="nx">greeting</span><span class="o">:</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">Hello, I am </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">greeting2</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">greeting3</span> <span class="o">=</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">Hello, I am </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">greeting3</span><span class="p">(</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">harvey</span><span class="p">.</span><span class="nx">greeting</span><span class="p">(</span><span class="p">)</span>
<span class="c1">// Hello, I am 
</span><span class="c1"></span><span class="c1">// window
</span><span class="c1"></span><span class="nx">harvey</span><span class="p">.</span><span class="nx">greeting2</span><span class="p">(</span><span class="p">)</span>
<span class="c1">// Hello, I am harvey
</span><span class="c1"></span><span class="c1">// harvey
</span></code></pre></td></tr></table>
</div>
</div>
<p>就算我们用 <code>call</code> 也无法指定 <code>this</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">harvey</span><span class="p">.</span><span class="nx">greeting</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">harvey</span><span class="p">)</span>
<span class="c1">// Hello, I am 
</span><span class="c1"></span><span class="c1">// window
</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="new-运算符">new 运算符</h2>

<p>在我们使用 <code>new</code> 去创建新对象的时候，系统自动帮我们做了 4 件事情</p>

<ul>
<li>自动创建空对象</li>
<li>自动为空对象关联原型，原型的地址为 <code>X.prototype</code></li>
<li>自动将空对象作为 <code>this</code> 关键字运行构造函数</li>

<li><p>自动 <code>return this</code>，也就是说可以接着写 <code>new X().getName()</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span><span class="p">{</span>
<span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span>
<span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span>
<span class="p">}</span>
<span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">greeting</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">Hello, I am </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">harvey</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="s1">&#39;harvey&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="c1">// 这里自动将 harvey 作为 this 运行了构造函数
</span><span class="c1"></span>

<span class="nx">harvey</span><span class="p">.</span><span class="nx">greeting</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<p>好了，<code>this</code> 的讨论结束，理解的关键就在于我们最开始提到的 5 点 Key Points。</p>

<hr />

<h2 id="再看看网上总结的-this">再看看网上总结的 this</h2>

<p>留坑，以后再总结。</p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/javascript/" term="JavaScript" label="JavaScript" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">浅析 MVC</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-12-22-mvc/" />
            <id>http://hais-teatime.com/post/2019-12-22-mvc/</id>
            <updated>2020-01-28T11:35:42+08:00</updated>
            <published>2019-12-22T12:32:38+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[如果要说我目前在入门阶段遇到的几个让我最没自信的家伙，一个要数算法，然后就是 MVC 了。所以今天就简单写一下自己的一些思考。]]></summary>
            
                <content type="html"><![CDATA[<p>如果要说我目前在入门阶段遇到的几个让我最没自信的家伙，一个要数算法，然后就是 MVC 了。所以今天就简单写一下自己的一些思考。</p>

<h2 id="mvc">MVC</h2>

<p>MVC 是一种有名的设计模式，我们可以把一个模块用三个对象表示出来，这三个对象就是 M、V 和 C：</p>

<blockquote>
<p><strong>M</strong> - <strong>Model</strong>，数据模型，负责操作所有数据</p>

<p><strong>V</strong> - <strong>View</strong>，视图，负责所有 UI 界面</p>

<p><strong>C</strong> - <strong>Controller</strong>，控制器，负责其他</p>
</blockquote>

<h3 id="model">Model</h3>

<p>我们可以用伪代码来尝试表示 Model 对象：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">M = {
  data: {
    key: value,
  },
  methods: {
    function Create: add data,
    function Remove: delete data,
    function Update: edit data,
    function Get: print data,
  }
}</code></pre></td></tr></table>
</div>
</div>
<p>他是一个专门用来存放数据的对象，并且可以提供一系列对数据进行操纵的 API，比如 Create、Remove、Update、Get 等。</p>

<h3 id="view">View</h3>

<p>同样的，我们可以来表示一下 View 对象：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">V = {
  element,
  innerHTML,
  methods: {
    function Render: reload innerHTML,
    Operate: {
      function Create: create newElement,
      function Remove: remove innerElement,
      function Edit: edit innerElement,
      function Find: get innerElement,
    }
  }
}</code></pre></td></tr></table>
</div>
</div>
<p>我们可以在 View 指定一个元素 element，可以对他内部的 HTML 代码进行修改和重载，同时也可以对其内部的元素进行增删改查等操作。</p>

<h3 id="control">Control</h3>

<p>对于 Control 部分的伪代码，我们也许可以这样写：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">C = {
  function Init: init M V C,
  function BindEvents: el.on(&#39;eventName&#39;, event),
  events: {
    function A: Update(data),
    function B: Render(html)
  }
}</code></pre></td></tr></table>
</div>
</div>
<p>在 Control 中，我们可以完成初始化操作，可以为元素绑定事件，并书写事件方法，用来触发 M 或 V 的更改。</p>

<p>当然，对 MVC 的理解不同的人可能有不同的想法，作为初学者我只是简单理解了一下。比如有时候，我们对 C 的界定可能并不是那么明显——它既可以操作视图，又可以操作数据，那么为什么不把他就放在 V 或者 M 中呢？</p>

<h2 id="eventbus">EventBus</h2>

<p>个人认为 EventBus 的出现主要是由于模块化和 MVC 的推进。前文也说了，在一个模块中，我们可以把所有的东西都分成 M V C 这三个对象来表示，这样虽然我们可以用统一形式的代码来表示几乎所有的情况，但同时也会带来一些问题。</p>

<p>首先，我们可以看看我们原来修改元素内容的方式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">function X: 
  if event.status == triggered:
    data = element.getData();
    newData = data.edit();
    element.update(newData);</code></pre></td></tr></table>
</div>
</div>
<p>是一个非常自然的线性关系，当事件被触发时，直接修改 DOM 来改变元素内容，DOM 操作和数据是混在一起的，我们并没有在代码中单独保存数据。</p>

<p>而使用 MVC 之后，我们修改元素内容的方式变成了：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">M = {
  data,
  function Update(data):
    edit data;
    eventBus.Trigger(&#39;data-updated&#39;)
}

V = {
  element,
  innerHTML,
  eventBus.On(&#39;data-updated&#39;, run Render(data))
  function Render(data): reload innerHTML
}

C = {
  function X:
    if event.status === triggered:
      M.Update(data)
}</code></pre></td></tr></table>
</div>
</div>
<p>看起来稍稍有些复杂：</p>

<p>当事件被触发之后，C 中的事件绑定函数会调用 M.Update 方法来操纵 data，</p>

<blockquote>
<p>但是负责视图的 V 此时并不知道事件已经触发，因此我们需要借助一个 “事件总线 EventBus” 来帮助我们完成事件从 M -&gt; V 传递的这样一个过程，</p>
</blockquote>

<p>M 更新完 data 之后触发 eventBus，</p>

<p>V 监听 eventBus，知道 M 已经更新完 data 了，然后调用 V.Render 方法更新视图。</p>

<p>当然除了帮助在 M V C 三个对象之间传递事件以外，eventBus 还可以帮助在模块之间传递事件。</p>

<p>下面用伪代码给出了一个 EventBus 常用 API 示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">EventBus: {
  function Trigger,
  function On,
  function Off
}</code></pre></td></tr></table>
</div>
</div>
<h2 id="表驱动编程">表驱动编程</h2>

<blockquote>
<p>表驱动法，又称之为表驱动、表驱动方法。 “表”是几乎所有数据结构课本都要讨论的非常有用的数据结构。表驱动方法出于特定的目的来使用表，程序员们经常谈到“表驱动”方法，但是课本中却从未提到过什么是&quot;表驱动&quot;方法。表驱动方法是一种使你可以在表中查找信息，而不必用很多的逻辑语句（ if 或 case ）来把它们找出来的方法。事实上，任何信息都可以通过表来挑选。在简单的情况下，逻辑语句往往更简单而且更直接。但随着逻辑链的复杂，表就变得越来越富有吸引力了。</p>
</blockquote>

<p>还是用伪代码来表示一下，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Map = [
  key1: value1,
  key2: value2,
  key3: value3,
  key4: value4
]

// 可以用上面这个表来简化我们的 if 语句，这样我们就不用写很多 if 了：

if key in Map: Map[key]

// 也可以用上面这个表来简化函数的声明等：

for key in Map:
  function key: Map[key]</code></pre></td></tr></table>
</div>
</div>
<h2 id="模块化">模块化</h2>

<p>我对模块化的理解其实很简单：</p>

<p>首先，模块化可以把不同的功能分成不同的模块，模块之间的瓜葛要尽可能小，最好每个模块在不知道外部情况的时候也可以正常工作，这样我们之后维护代码只需要关注特定模块的部分即可；</p>

<p>其次，我们可以将 M V C 抽象为三个模块，做成 M 模块、V 模块、C 模块，这三个模块不需要关注具体的细节，只需要实现对应基本的、通用的功能，然后把 M V C 和每一个实现具体功能、操纵具体元素的模块分开，这样如果我们要对 M V C 进行统一的修改，就不需要深入每一个具体功能之中了。</p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/javascript/" term="JavaScript" label="JavaScript" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">再看 JavaScript 继承</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-12-21-inheritance/" />
            <id>http://hais-teatime.com/post/2019-12-21-inheritance/</id>
            <updated>2020-01-28T11:35:42+08:00</updated>
            <published>2019-12-21T11:47:50+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[学完了整个 JavaScript 基础篇章之后，今天又看了一下所谓的继承，发现我之前理解的继承跟大家一直提到的那个继承不是一回事，于是写一篇文章记录一下。
本文将着重讨论基于原型的继承，也会简单写一下如何用 class 继承。]]></summary>
            
                <content type="html"><![CDATA[<p>学完了整个 JavaScript 基础篇章之后，今天又看了一下所谓的继承，发现我之前理解的继承跟大家一直提到的那个继承不是一回事，于是写一篇文章记录一下。</p>

<p>本文将着重讨论基于原型的继承，也会简单写一下如何用 class 继承。</p>

<hr />

<h2 id="key-points">Key Points</h2>

<ul>
<li><p>在 JavaScript 中，<strong>函数</strong> <code>Function</code> 也是一种 <strong>对象</strong> <code>Object</code></p></li>

<li><p>关于函数</p>

<ol>
<li>所有函数都自带 <code>prototype</code></li>
<li><code>prototype</code> 中自带 <code>constructor</code></li>
<li><code>constructor</code> 里面的东西就是函数的内容</li>
<li>构造函数首字母大写（约定俗成）</li>
</ol></li>

<li><p><code>对象.__proto__ === 其构造函数.prototype</code></p></li>
</ul>

<hr />

<p>理解一下上面几句话。</p>

<p>首先，关于函数也是一种对象这个说法，我们在后面会有相关的说明；</p>

<p>其次是关于函数的几个描述，我们可以做几个实验来验证一下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Harvey&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="s1">&#39;22&#39;</span><span class="p">}</span>
<span class="kd">let</span> <span class="nx">fn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">)</span> <span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
<span class="cm">/*
</span><span class="cm">{
</span><span class="cm">  0: 1,
</span><span class="cm">  1: 2,
</span><span class="cm">  2: 3,
</span><span class="cm">  length: 3,
</span><span class="cm">  __proto__: Array(0)
</span><span class="cm">}
</span><span class="cm">*/</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
<span class="cm">/*
</span><span class="cm">{
</span><span class="cm">  name: &#34;Harvey&#34;,
</span><span class="cm">  age: &#34;22&#34;,
</span><span class="cm">  __proto__: Object
</span><span class="cm">}
</span><span class="cm">*/</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span>
<span class="cm">/*
</span><span class="cm">{
</span><span class="cm">  length: 0,
</span><span class="cm">  name: &#34;fn&#34;,
</span><span class="cm">  arguments: null,
</span><span class="cm">  caller: null,
</span><span class="cm">  prototype: {
</span><span class="cm">    constructor: ƒ ()
</span><span class="cm">    __proto__: Object
</span><span class="cm">  }
</span><span class="cm">  __proto__: ƒ ()
</span><span class="cm">}
</span><span class="cm">*/</span>

<span class="nx">fn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nx">fn</span> <span class="c1">// true
</span></code></pre></td></tr></table>
</div>
</div>
<p>可以很清楚的看到，比起别的对象，函数确实是比较特别的，他天生就带有一个 <code>prototype</code> 属性，而且 <code>prototype</code> 中的 <code>constructor</code> 就是这个函数本身。</p>

<p>我们也可以再验证一下最后一句话：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">Person</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="p">}</span>
<span class="kd">let</span> <span class="nx">me</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span>
<span class="nx">me</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span> <span class="c1">// true
</span></code></pre></td></tr></table>
</div>
</div>
<p>知道了这样几个前置的知识，我们就可以往下讨论了。</p>

<h2 id="原型链">原型链</h2>

<p>原型链的精髓其实就是刚才已经提到过的一句话：</p>

<blockquote>
<p><code>对象.__proto__ === 其构造函数.prototype</code></p>
</blockquote>

<h3 id="普通对象的原型链">普通对象的原型链</h3>

<blockquote>
<p><strong>普通对象的原型是 Object</strong></p>
</blockquote>

<p>这句话要从以下几点来理解：</p>

<ol>
<li>创建一个对象可以按这种方式写： <code>let obj = new Object({ name: 'Harvey', age: '22' })</code></li>
<li>Object 实际上是一个构造函数，他构造了 obj</li>
<li><code>obj.__proto__ === Object.prototype</code></li>
</ol>

<p>因此我们可以简单表示一下这个普通对象的原型链：</p>

<p><code>obj -&gt; Object.prototype</code></p>

<h3 id="数组的原型链">数组的原型链</h3>

<blockquote>
<p><strong>数组的原型是 Array</strong></p>
</blockquote>

<p>这句话要从以下几点来理解：</p>

<ol>
<li>创建一个数组可以按这种方式写： <code>let arr = new Array(1, 2, 3)</code></li>
<li>Array 实际上是一个构造函数，他构造了 arr</li>
<li><code>arr.__proto__ === Array.prototype</code></li>
</ol>

<p>事实上，我们还会发现：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">arr</span><span class="p">.</span><span class="nx">__proto__</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span> <span class="c1">// true
</span><span class="c1"></span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span> <span class="c1">// true
</span></code></pre></td></tr></table>
</div>
</div>
<p>也就是说，一个数组的原型链要稍微复杂一些：</p>

<p><code>arr -&gt; Array.prototype -&gt; Object.prototype</code></p>

<p>等等，这意味着 <code>Object.prototype</code> 构造了 <code>Array.prototype</code>？这个问题我们稍后再谈。</p>

<h3 id="函数的原型">函数的原型</h3>

<blockquote>
<p><strong>函数的原型是 Function</strong></p>
</blockquote>

<p>这句话要从以下几点来理解：</p>

<ol>
<li>创建一个数组可以按这种方式写： <code>let fn = new Function( (), { console.log('hi') } )</code></li>
<li>Function 实际上是一个构造函数，他构造了 fn</li>
<li><code>fn.__proto__ === Function.prototype</code></li>
</ol>

<p>也就是说，一个函数的原型链也要稍微复杂一些：</p>

<p><code>fn -&gt; Function.prototype -&gt; Object.prototype</code></p>

<h3 id="修改原型链">修改原型链</h3>

<p>通过直接修改 <code>__proto__</code> 就可以达到修改原型链的目的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="kd">let</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span>
<span class="kd">let</span> <span class="nx">obj3</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">c</span><span class="o">:</span> <span class="mi">3</span> <span class="p">}</span>
<span class="nx">obj2</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="nx">obj1</span>
<span class="nx">obj3</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="nx">obj2</span>
</code></pre></td></tr></table>
</div>
</div>
<p>这样，他们的原型链就变成了：
<code>obj3 -&gt; obj2 -&gt; obj1 -&gt; Object.prototype</code></p>

<p>但是这种方法是不推荐的，我们更推荐使用 <code>Object.create()</code> 方法，他的使用方法如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="kd">let</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">obj1</span><span class="p">)</span>
<span class="nx">obj2</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="kd">let</span> <span class="nx">obj3</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">obj2</span><span class="p">)</span>
<span class="nx">obj3</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre></td></tr></table>
</div>
</div>
<p>这样与上面直接修改 <code>__proto__</code> 效果是一样的。</p>

<h2 id="继承">继承</h2>

<p>这里我们就发现，如果我们按照上面的方法修改原型链，得到的原型链 <code>obj3 -&gt; obj2 -&gt; obj1 -&gt; Object.prototype</code> 有点问题！</p>

<p>他不满足 <code>对象.__proto__ === 其构造函数.prototype</code>！</p>

<p>这是当然的，因为 <code>obj1</code> 本来就不是 <code>obj2</code> 的构造函数。话说回来，<code>obj1</code> 根本就不是函数，他连 <code>prototype</code> 都没有。</p>

<p>所以说这里我们要明确一点，平时大家所说的继承（或者说类的继承），其实更多的是一种 <strong>狭义的继承</strong>。</p>

<p>他指的 <strong>不是</strong> 我们按照上面的方式 <strong>单纯对原型链进行的修改</strong>，<strong>而是</strong> 一种在 <strong>构造函数之间</strong> 的，有 <code>prototype</code> 存在的继承。</p>

<p><em>PS. 尽管在某些时候，我们使用 <code>Object.create()</code> 将原型链进行简单修改也被称为继承，但不是我们这里讨论的继承</em></p>

<p>那么问题来了，这种在 <strong>构造函数之间的继承</strong> 应该怎么写呢？</p>

<h3 id="第一步-使用-call-来调用父类构造函数">第一步：使用 <code>call</code> 来调用父类构造函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">姓名</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">姓名</span> <span class="o">=</span> <span class="nx">姓名</span>
<span class="p">}</span>
<span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">自我介绍</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">你好，我是 </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">姓名</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Student</span><span class="p">(</span><span class="nx">姓名</span><span class="p">,</span> <span class="nx">学号</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">Person</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">姓名</span><span class="p">)</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">学号</span> <span class="o">=</span> <span class="nx">学号</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>可以通过 <code>console.dir()</code> 来分别看看 <code>Person</code> 和 <code>Student</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Person
</span><span class="c1"></span><span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Person&#34;</span><span class="p">,</span>
  <span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">自我介绍</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="p">(</span><span class="p">)</span><span class="p">,</span>
    <span class="nx">constructor</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">姓名</span><span class="p">)</span><span class="p">,</span>
    <span class="nx">__proto__</span><span class="o">:</span> <span class="nb">Object</span><span class="p">,</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">__proto__</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="p">(</span><span class="p">)</span> <span class="c1">// Function.prototype
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// Student
</span><span class="c1"></span><span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Student&#34;</span><span class="p">,</span>
  <span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="nx">Student</span><span class="p">(</span><span class="nx">姓名</span><span class="p">,</span> <span class="nx">学号</span><span class="p">)</span><span class="p">,</span>
    <span class="nx">__proto__</span><span class="o">:</span> <span class="nb">Object</span><span class="p">,</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">__proto__</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="p">(</span><span class="p">)</span> <span class="c1">// Function.prototype
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>我们尝试创建一个 <code>Student</code> 对象 <code>小明</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">小明</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Student</span><span class="p">(</span><span class="s1">&#39;小明&#39;</span><span class="p">,</span> <span class="mi">123456</span><span class="p">)</span>
<span class="cm">/*
</span><span class="cm">{
</span><span class="cm">  姓名: &#34;小明&#34;,
</span><span class="cm">  学号: 123456,
</span><span class="cm">
</span><span class="cm">  __proto__: {
</span><span class="cm">    constructor: ƒ Student(姓名, 学号),
</span><span class="cm">    __proto__: Object,
</span><span class="cm">  }
</span><span class="cm">
</span><span class="cm">}
</span><span class="cm">*/</span>

<span class="nx">小明</span><span class="p">.</span><span class="nx">自我介绍</span><span class="p">(</span><span class="p">)</span>
<span class="c1">// Uncaught TypeError: 小明.自我介绍 is not a function
</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>小明</code> 如何拿到 <code>学号</code> ？</p>
</blockquote>

<p>在 <code>new Student('小明', 123456)</code> 的时候，系统会去调用 <code>Student</code> 函数，并且把 <code>小明</code> 这个对象作为 <code>this</code> 传进去；</p>

<p>相当于在函数中执行了 <code>小明.学号 = 123456</code>。</p>

<blockquote>
<p><code>小明</code> 如何拿到 <code>姓名</code> ？</p>
</blockquote>

<p>同样，系统调用 <code>Student</code> 函数，看到了 <code>Person.call(this, 姓名)</code>（相当于 <code>Person.call(小明, '小明')</code>），意思是让 <code>Person</code> 中的 <code>this</code> 为 <code>小明</code>，并且传一个参数 <code>'小明'</code> 给 <code>Parent</code>；</p>

<p>然后将会调用 <code>Person</code> 函数，在 <code>Person</code> 中执行 <code>this.姓名 = 姓名</code>（相当于 <code>小明.姓名 = '小明'</code>）。</p>

<blockquote>
<p>为什么 <code>小明</code> 不能使用 <code>自我介绍</code> ？</p>
</blockquote>

<p>因为可以看到，<code>小明</code> 这个对象中没有 <code>自我介绍</code> 属性，他的 <code>__proto__</code> 中也没有，因此他找不到 <code>自我介绍</code></p>

<h3 id="第二步-建立原型链">第二步：建立原型链</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">Student</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>
<p>我们再打印出 <code>Student</code> 来看看</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Student
</span><span class="c1"></span><span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Student&#34;</span><span class="p">,</span>
  <span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">__proto__</span><span class="o">:</span><span class="p">{</span>
      <span class="nx">自我介绍</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="p">(</span><span class="p">)</span><span class="p">,</span>
      <span class="nx">constructor</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">姓名</span><span class="p">)</span><span class="p">,</span>
      <span class="nx">__proto__</span><span class="o">:</span> <span class="nb">Object</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">__proto__</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="p">(</span><span class="p">)</span> <span class="c1">// Function
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>我们发现 <code>prototype</code> 里面的 <code>constructor</code> 不见了，并且里面的 <code>__proto__</code> 变得跟 <code>Person.prototype</code> 一样了</p>

<p>这个时候再 <code>new</code> 一个 <code>小花</code> 看看：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">小花</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Student</span><span class="p">(</span><span class="s1">&#39;小花&#39;</span><span class="p">,</span> <span class="mi">234567</span><span class="p">)</span>
<span class="cm">/*
</span><span class="cm">{
</span><span class="cm">  姓名: &#34;小花&#34;,
</span><span class="cm">  学号: 234567,
</span><span class="cm">  __proto__: {
</span><span class="cm">
</span><span class="cm">    __proto__: {
</span><span class="cm">      自我介绍: ƒ (),
</span><span class="cm">      constructor: ƒ Person(姓名),
</span><span class="cm">      __proto__: Object,
</span><span class="cm">    }
</span><span class="cm">
</span><span class="cm">  }
</span><span class="cm">}
</span><span class="cm">*/</span>

<span class="nx">小花</span><span class="p">.</span><span class="nx">自我介绍</span><span class="p">(</span><span class="p">)</span>
<span class="c1">// &#39;你好，我是 小花&#39;
</span></code></pre></td></tr></table>
</div>
</div>
<p>小花现在会自我介绍了，但是还有个小问题，我们发现 <code>小花.__proto__</code> 中的 <code>constructor</code> 不见了！我们得赶紧修复一下。</p>

<h3 id="第三步-解决-constructor-的问题">第三步：解决 constructor 的问题</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">Student</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Student</span>
</code></pre></td></tr></table>
</div>
</div>
<p>看看现在 <code>Student</code> 的样子</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// Student
</span><span class="c1"></span><span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Student&#34;</span><span class="p">,</span>
  <span class="nx">prototype</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="nx">Student</span><span class="p">(</span><span class="nx">姓名</span><span class="p">,</span> <span class="nx">学号</span><span class="p">)</span><span class="p">,</span>
    <span class="nx">__proto__</span><span class="o">:</span><span class="p">{</span>
      <span class="nx">自我介绍</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="p">(</span><span class="p">)</span><span class="p">,</span>
      <span class="nx">constructor</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">姓名</span><span class="p">)</span><span class="p">,</span>
      <span class="nx">__proto__</span><span class="o">:</span> <span class="nb">Object</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="p">,</span>
  <span class="nx">__proto__</span><span class="o">:</span> <span class="nx">ƒ</span> <span class="p">(</span><span class="p">)</span> <span class="c1">// Function
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>最后请出我们的小红</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">小红</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Student</span><span class="p">(</span><span class="s1">&#39;小花&#39;</span><span class="p">,</span> <span class="mi">345678</span><span class="p">)</span>
<span class="cm">/*
</span><span class="cm">{
</span><span class="cm">  姓名: &#34;小红&#34;,
</span><span class="cm">  学号: 345678,
</span><span class="cm">  __proto__: {
</span><span class="cm">
</span><span class="cm">    constructor: ƒ Student(姓名, 学号),
</span><span class="cm">
</span><span class="cm">    __proto__: {
</span><span class="cm">      自我介绍: ƒ (),
</span><span class="cm">      constructor: ƒ Person(姓名),
</span><span class="cm">      __proto__: Object,
</span><span class="cm">    }
</span><span class="cm">
</span><span class="cm">  }
</span><span class="cm">}
</span><span class="cm">*/</span>

<span class="nx">小红</span><span class="p">.</span><span class="nx">自我介绍</span><span class="p">(</span><span class="p">)</span>
<span class="c1">// ‘你好，我是 小红’
</span></code></pre></td></tr></table>
</div>
</div>
<p>OK，一切正常。</p>

<h3 id="总结">总结</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">姓名</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">姓名</span> <span class="o">=</span> <span class="nx">姓名</span>
<span class="p">}</span>

<span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">自我介绍</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">你好，我是 </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">姓名</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Student</span><span class="p">(</span><span class="nx">姓名</span><span class="p">,</span> <span class="nx">学号</span><span class="p">)</span><span class="p">{</span>
  <span class="nx">Person</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">姓名</span><span class="p">)</span> <span class="c1">// 调用父级构造函数
</span><span class="c1"></span>  <span class="k">this</span><span class="p">.</span><span class="nx">学号</span> <span class="o">=</span> <span class="nx">学号</span>
<span class="p">}</span>

<span class="nx">Student</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span> <span class="c1">// 建立原型链
</span><span class="c1"></span>
<span class="nx">Student</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Student</span> <span class="c1">// 解决 constructor 问题
</span><span class="c1"></span><span class="cm">/*
</span><span class="cm">{
</span><span class="cm">  name: &#34;Student&#34;,
</span><span class="cm">
</span><span class="cm">  prototype: {
</span><span class="cm">
</span><span class="cm">    constructor: ƒ Student(姓名, 学号),
</span><span class="cm">    // Student.prototype 里面的 constructor 就是 Student
</span><span class="cm">
</span><span class="cm">    __proto__:{
</span><span class="cm">      // Student.prototype 里面的 __proto__ 是 Person.prototype
</span><span class="cm">      自我介绍: ƒ (),
</span><span class="cm">      constructor: ƒ Person(姓名),
</span><span class="cm">      __proto__: Object,
</span><span class="cm">    }
</span><span class="cm">
</span><span class="cm">  },
</span><span class="cm">
</span><span class="cm">  __proto__: ƒ () // Function
</span><span class="cm">}
</span><span class="cm">*/</span>

<span class="nx">Student</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">报数</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">我的学号是 </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">学号</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">小红</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Student</span><span class="p">(</span><span class="s1">&#39;小红&#39;</span><span class="p">,</span> <span class="mi">345678</span><span class="p">)</span>
<span class="cm">/*
</span><span class="cm">{
</span><span class="cm">  姓名: &#34;小红&#34;
</span><span class="cm">  学号: 345678
</span><span class="cm">  __proto__: {
</span><span class="cm">
</span><span class="cm">    constructor: ƒ Student(姓名, 学号)
</span><span class="cm">    // 小红 是由 Student 构造的
</span><span class="cm">    // 小红.__proto__ 跟 Student.prototype 是一样的
</span><span class="cm">
</span><span class="cm">    __proto__: {
</span><span class="cm">      自我介绍: ƒ ()
</span><span class="cm">      constructor: ƒ Person(姓名)
</span><span class="cm">      __proto__: Object
</span><span class="cm">    }
</span><span class="cm">
</span><span class="cm">  }
</span><span class="cm">}
</span><span class="cm">*/</span>

<span class="nx">小红</span><span class="p">.</span><span class="nx">自我介绍</span><span class="p">(</span><span class="p">)</span>
<span class="nx">小红</span><span class="p">.</span><span class="nx">报数</span><span class="p">(</span><span class="p">)</span>
<span class="c1">// ‘你好，我是 小红’
</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="用-class-继承">用 class 继承</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">class</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">姓名</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">姓名</span> <span class="o">=</span> <span class="nx">姓名</span>
    <span class="p">}</span>
    <span class="nx">自我介绍</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">你好，我是 </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">姓名</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">Student</span> <span class="kr">extends</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">姓名</span><span class="p">,</span> <span class="nx">学号</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">姓名</span><span class="p">)</span> <span class="c1">// 这里的 姓名 两个字要与父类中的一样
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">学号</span> <span class="o">=</span> <span class="nx">学号</span>
    <span class="p">}</span>
    <span class="nx">报数</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="sb">我的学号是 </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">学号</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">小红</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Student</span><span class="p">(</span><span class="s1">&#39;小红&#39;</span><span class="p">,</span> <span class="mi">345678</span><span class="p">)</span>

<span class="nx">小红</span><span class="p">.</span><span class="nx">自我介绍</span><span class="p">(</span><span class="p">)</span>
<span class="nx">小红</span><span class="p">.</span><span class="nx">报数</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/javascript/" term="JavaScript" label="JavaScript" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">小项目：会动的代码 - Usagi & Piske</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-12-17-usagi-piske/" />
            <id>http://hais-teatime.com/post/2019-12-17-usagi-piske/</id>
            <updated>2020-01-28T17:22:13+08:00</updated>
            <published>2019-12-17T12:43:58+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[初学前端，使用原生 JavaScript 和 CSS 所做的一个小项目。点击可以查看 代码仓库 和 效果预览。]]></summary>
            
                <content type="html"><![CDATA[<p>初学前端，使用原生 JavaScript 和 CSS 所做的一个小项目。点击可以查看 <a href="https://github.com/Hyuain/usagi-piske-animated" target="_blank">代码仓库</a> 和 <a href="http://hais-teatime.com/usagi-piske-animated" target="_blank">效果预览</a>。</p>

<h1 id="css-部分">CSS 部分</h1>

<h2 id="关于选题">关于选题</h2>

<p>关于练习 CSS 最常见的就是仿写某个页面，但是总感觉这样做让人有些提不起兴趣，毕竟以后工作之后也会写很多页面，不如学习的时候就仿些别的东西？比如某个可爱的小生物？正巧又结识了 CodePen，看到上面有很多有趣的小栗子，着实让人有一试的欲望。于是就选择了 Kanahei 的 Usagi 和 Piske，图片不难又比较可爱，对于我现在的水平来说具有一定的可操作度。</p>

<h2 id="在项目中学习">在项目中学习</h2>

<h3 id="1-如何让屏幕不乱滚">1. 如何让屏幕不乱滚？</h3>

<p>首先我想要让移动端的屏幕不能随意缩放，因为我会针对移动端做特定的分辨率适配，而且两个小可爱是在屏幕底部的，如果让用户随意缩放，就可能产生一些不必要的错误，因此我得修改 VSCode 默认的 <code>viewport</code>，从淘宝手机版抄得 <code>width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover</code>。</p>

<p>然后我发现 Usagi 实际上是圆角矩形的一部分，我不能让其他的部分也被用户看到，所以得给 <code>html</code> 和 <code>body</code> 加上 <code>overflow:hidden</code>，同时把它们的 <code>height</code> 都设置为 <code>100%</code>，如果只有一个设置，有时候可能会出现问题，所以索性两个都加上了。这样屏幕就不会乱滚了。</p>

<h3 id="2-usagi-的耳朵怎么画">2. Usagi 的耳朵怎么画？</h3>

<p>感觉图上的耳朵并不是完全对称的，恍惚间记得之前学习的时候 <code>border-radius</code> 有一个加斜线的高级用法，当时搞得不是很清楚，于是又去查了一下，最终使用了比较容易理解的 <code>border-top-left-radius</code> <code>border-top-right-radius</code> 来分别定义两个圆角，每个属性给予两个值，在控制台调试得到了比较合适的数值。</p>

<h3 id="3-usagi-的耳朵下面为什么有条细线">3. Usagi 的耳朵下面为什么有条细线？</h3>

<p>仔细观察总感觉 Usagi 的耳朵下面有一条细线，怎么调整他的位置都不会消失，怀疑可能是由于是斜线或者是四舍五入导致的细线，为了美观，为两个耳朵添加伪元素 <code>::after</code> 来遮住细线。</p>

<h3 id="4-usagi-的上嘴唇怎么画">4. Usagi 的上嘴唇怎么画？</h3>

<p>之前学习过一个用 <code>border</code> 来画三角形的案例，知道隐藏掉一些 <code>border</code> 可能会得到一些特殊的图案。总而言之先尝试隐藏掉两边，再用 <code>border-radius: 50%</code> 看看效果，发现效果还比较理想。</p>

<h3 id="5-移动端适配怎么做">5. 移动端适配怎么做？</h3>

<p>（2020-01-28 更新）</p>

<p>当之前所有的内容做完之后发现一个很大的问题，就是手机上有可能显示不下，因为所有的内容都是用 <code>px</code> 写死的，于是就又建了一个 CSS 文件，加上媒体查询，直接用 VSCode 替换将所有的属性在 <code>500px</code> 下时全部替换为 <code>calc(0.7*__px)</code> （笑）。今天 Renew 这个项目的时候，使用了 rem 方案来做移动端的适配，不过也比较简单，只是以 <code>500px</code> 为界设置了不同的 <code>font-size</code>，也没有用 JS 来动态改变 <code>font-size</code>，因为不希望在大屏设备上的两个小家伙变得太大。</p>

<h1 id="javascript-部分">JavaScript 部分</h1>

<h2 id="基本思路">基本思路</h2>

<p>思路其实蛮简单，就是将之前写好的 CSS 文件变成字符串，然后将这个字符串同时写到 <code>&lt;style&gt;&lt;/style&gt;</code> 标签和文本中，用计时器使得他一个字符一个字符地写入，同时控制写入的速度。</p>

<h2 id="在项目中学习-1">在项目中学习</h2>

<h3 id="1-如何一个字一个字地显示">1. 如何一个字一个字地显示？</h3>

<p>直接使用 <code>setInterval</code>，回调中写 <code>style.innerHTML</code> 和 <code>text.innerHTML</code> 均为 <code>styleCode.substring(0, n + 1)</code> 即可，<code>n</code> 从 <code>0</code> 开始，每次累加，当 <code>n &gt;= 0</code> 时，<code>clearInterval</code> 即可。</p>

<h3 id="2-如何显示空格和换行">2. 如何显示空格和换行？</h3>

<p>当被写入 <code>text</code> 之后，空格和换行都被忽略掉了，于是需要对要显示给用户看的 <code>text</code> 里面的文本内容进行特殊处理，将 <code>'\n'</code> 变为 <code>'&lt;br&gt;'</code>，将 <code>' '</code> 变为 <code>'nbsp'</code>。</p>

<h3 id="3-代码优化">3. 代码优化</h3>

<p>将整个控制组件封装到一个对象 <code>player</code> 中，通过 <code>init</code> 方法来初始化对象，在初始化时执行 <code>play</code> 和 <code>bindEvents</code> 方法，开始播放并为播放控件（三档速度调节、播放和暂停按钮）绑定事件。</p>

<h1 id="打包">打包</h1>

<p>（2020-01-28 更新）</p>

<p>最开始项目使用全局安装的 parcel 进行打包，因此项目没有 <code>package.json</code> 文件，项目的入口文件是 <code>src/index.html</code>，可以直接使用 parcel 命令来预览和开发。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">parcel src/index.html</code></pre></td></tr></table>
</div>
</div>
<p>项目 Renew 后加入了 <code>deploy.sh</code> 文件用于打包和上传，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 构建</span>
rm -rf dist <span class="o">&amp;&amp;</span> parcel build src/index.html --public-url ./ --no-cache --no-minify

<span class="c1"># 进入生成的构建文件夹</span>
<span class="nb">cd</span> dist

<span class="c1"># 初始化 git</span>
git init
git add -A
git commit -m <span class="s1">&#39;deploy&#39;</span>

<span class="c1"># 部署到 GitHub Pages</span>
git push -f git@github.com:Hyuain/usagi-piske-animated.git master:gh-pages

<span class="nb">cd</span> -</code></pre></td></tr></table>
</div>
</div>
<p>parcel 打包出来的 <code>index.html</code> 中引用的 CSS 和 JS 文件路径默认是根目录 <code>'/'</code>，但是如果部署在了二级目录下面，比如 GitHub Pages 的项目页下面，就会找不到地址，所以需要添加 <code>--public-url ./</code> ，将打包后的引用地址改为相对路径。</p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/javascript/" term="JavaScript" label="JavaScript" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/css/" term="CSS" label="CSS" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E9%A1%B9%E7%9B%AE/" term="项目" label="项目" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">jQuery 初见</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-12-08-jquery/" />
            <id>http://hais-teatime.com/post/2019-12-08-jquery/</id>
            <updated>2020-01-28T11:35:42+08:00</updated>
            <published>2019-12-08T10:34:18+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[本文是初学 jQuery API 的一些记录。]]></summary>
            
                <content type="html"><![CDATA[<p>本文是初学 jQuery API 的一些记录。</p>

<blockquote>
<p>本文参考了 <a href="http://www.ruanyifeng.com/blog/2011/07/jquery_fundamentals.html" target="_blank">阮一峰的博客</a> 、<a href="https://www.jquery123.com/jQuery/" target="_blank">jQuery中文文档</a> 及互联网上的公开内容</p>
</blockquote>

<h2 id="获取元素">获取元素</h2>

<p>通过使用执行 <code>jQuery()</code> 函数，我们可以得到一个 jQuery 对象，这个对象可以对选定的元素集合进行操作。<code>jQuery()</code> 也可以写作 <code>$()</code>。</p>

<p>他接受以下几种常用的参数（但不限于此）：</p>

<ul>
<li>CSS 选择器（selector），比如 <code>$('#myId')</code> <code>$('input[name=first]')</code> 等。</li>
<li>DOM 元素（组）（element / elementArray)</li>
<li>jQuery 对象</li>
<li>HTML 字符串，比如 <code>&lt;div&gt;&lt;/div&gt;</code>。jQuery 会根据它创建一个新的 DOM 元素，然后再创建一个 jQuery 对象。我们可以用一些方法使得他展现在页面上，具体例子比如：<code>$( &quot;&lt;p id='test'&gt;My &lt;em&gt;new&lt;/em&gt; text&lt;/p&gt;&quot; ).appendTo( &quot;body&quot; )</code></li>
</ul>

<p>我们可以通过对结果进行进一步操作，来缩小范围</p>

<ul>
<li><code>$('div').find('p')</code>，选择 <code>div</code> 中的 <code>p</code> 元素</li>
<li><code>$('div').next('p')</code>，选择 <code>div</code> 后面紧邻的 <code>p</code> 元素</li>
<li><code>$('div').prev('p')</code>，选择 <code>div</code> 前面紧邻的 <code>p</code> 元素</li>
<li><code>$('div').parent()</code>， 选择 <code>div</code> 的父元素</li>
<li><code>$('div').children()</code>，选择 <code>div</code> 的所有子元素</li>
<li><code>$('div').siblings()</code>，选择 <code>div</code> 的兄弟元素</li>
</ul>

<p>等等。</p>

<h2 id="链式操作">链式操作</h2>

<p>由于在 jQuery 中，每一个操作（方法）都将会返回一个 jQuery 对象，因此我们可以把下一个操作紧接着写在后面，具体表现为：</p>

<p><code>$('div').find('p').remove()</code></p>

<p>当我们使用 <code>.find()</code> 方法后，操作的元素就不再是 <code>div</code>，而是 <code>div p</code>，比如上面操作表示 <code>div p</code> 将被移除。此时若我们想返回上一层操作，只需要使用 <code>end()</code> 方法。</p>

<p><code>$('div').find('p').end()</code></p>

<h2 id="dom-操作">DOM 操作</h2>

<p>常用的 DOM 操作有这些：</p>

<ul>
<li><code>addClass()</code>：为选定的元素添加 class 名</li>
<li><code>after()</code>：在选定的元素同级的后面增加新元素</li>
<li><code>before()</code>：在选定的元素同级的前面增加新元素</li>
<li><code>append()</code>：在选定元素内部的末尾添加新元素</li>
<li><code>appendTo()</code>：将选定元素插入到某个元素内部的末尾（也就是成为其子元素）</li>
<li><code>attr()</code>：获取选定的第一个元素的属性值</li>
<li><code>clone()</code>：创建一个深拷贝副本</li>
<li><code>css()</code>：获取选定的第一个元素的某个 CSS 属性值；或者为每一个选定的元素添加一个 CSS 属性</li>
<li><code>empty()</code>：从 DOM 中移除选定元素的所有子节点</li>
<li><code>html()</code>：获取选定的第一个元素的 HTML 内容；或者为每一个选定的元素添加 HTML 内容</li>
<li><code>remove()</code>：删除匹配元素，同时删除事件</li>
<li><code>wrap()</code>：为每一个选定元素的外层包上一个 HTML 元素</li>
<li><code>wrapAll()</code>：在所有选定元素的外层包上一层 HTML 元素</li>
</ul>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/javascript/" term="JavaScript" label="JavaScript" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/jquery/" term="jQuery" label="jQuery" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">函数的执行时机</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-12-06-js-1/" />
            <id>http://hais-teatime.com/post/2019-12-06-js-1/</id>
            <updated>2020-01-29T19:37:24+08:00</updated>
            <published>2019-12-03T09:00:59+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[本文将着重探讨函数的执行实机这个问题。]]></summary>
            
                <content type="html"><![CDATA[<p>本文将着重探讨函数的执行实机这个问题。</p>

<h1 id="函数的执行时机">函数的执行时机</h1>

<blockquote>
<p>函数中变量的值是在执行的时候确定的，而不是在定义的时候。</p>
</blockquote>

<p>我们再来看一下这一段代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js">    <span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">// 创建一个全局变量 i
</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
      <span class="p">}</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>上面代码运行的结果是将会打印出 6 个 <code>6</code>，这是因为 setTimeout 有 <strong>超时延迟</strong> ，如果当前页面（或者操作系统/浏览器本身）<strong>被其他任务占用</strong>，则会产生延时，<strong>等到其他任务执行完之后，setTimeout 里面的函数才会被执行</strong>。</p>

<p>也就是说，等到该执行 <code>console.log(i)</code> 这句话的时候，<code>i</code> 的值已经被因为循环而修改成了 <code>6</code>。</p>

<p>为了让上面的代码能够打印出 <code>0 1 2 3 4 5</code>，我们可以这样改写代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js">    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
      <span class="p">}</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>这样 <code>i</code> 的作用域就只在 <code>for 循环</code> 内部，同时每次循环的时候，都会创建一个 <strong>新的局部变量 <code>i</code></strong>。当然要注意的是，这并不是改变了函数的执行顺序，<code>console.log(i)</code> 这句话仍然是在 <code>for 循环</code> 执行完毕之后再执行的，我们可以做一个实验：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js">    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
      <span class="p">}</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;End&#39;</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>这样写代码最后将会先打印 6 个 <code>'End'</code>，再打印 <code>0 1 2 3 4 5</code>。</p>

<blockquote>
<p>那么还没有别的解决方法呢？</p>
</blockquote>

<p>其实是有的，在 <code>let</code> 出现之前，我们仍然有其他的方法来达到想要的效果，下面就简单介绍一下其中的几种方法，他们的核心思路其实都是 <strong>把每一次的 <code>i</code> 都保存起来</strong>：</p>

<p><strong>第一种方法</strong> 实际上跟刚才的新语法原理上差不多，只不过更容易理解一些，先上代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js">    <span class="kd">let</span> <span class="nx">i</span>   <span class="c1">// 创建全局变量 i
</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span>   <span class="c1">// 创建局部变量 j
</span><span class="c1"></span>      <span class="nx">setTimeout</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span>
      <span class="p">}</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;End&#39;</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>原理非常简单，我们在 <code>for 循环</code> 内部创建了一个新的 <strong>具有块级作用域的局部变量 <code>j</code></strong>，每次循环的时候，都会创建一个新的 <code>j</code>，于是我们用 <code>j</code> 来保存了每次的 <code>i</code>，当然他也会先打印 6 个 <code>'End'</code>，再打印 <code>0 1 2 3 4 5</code>。</p>

<p><strong>第二种方法</strong>，在 <code>let</code> 诞生之前，我们可以借助函数的传值来保存每一次的 <code>i</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js">    <span class="kd">var</span> <span class="nx">i</span>   <span class="c1">// 这里是 let 还是 var 都不要紧，都是创建了一个全局变量，就像最开始的情况一样
</span><span class="c1"></span>    <span class="kd">function</span> <span class="nx">doSetTimeout</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
      <span class="p">}</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">doSetTimeout</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;End&#39;</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>看看代码执行的流程：</p>

<ol>
<li>首先我们定义了一个中间函数 <code>doSetTimeout</code></li>
<li>然后在 <code>for 循环</code> 中调用了这个函数</li>
<li>每次循环调用的时候，就传入一个参数 <code>i</code> 给 <code>doSetTimeout</code>，</li>
<li><code>doSetTimeout</code> 用形参 <code>i</code> 接收了这个传给他的参数，在这一步，实际上已经产生了 <strong>2 个 <code>i</code></strong>：

<ul>
<li>一个是 <strong>全局变量 <code>i</code></strong>（也就是 <code>for 循环</code> 中的 <code>i</code>）</li>
<li>一个是 <code>doSetTimeout</code> 这个函数里面的 <strong>局部变量 <code>i</code></strong></li>
</ul></li>
<li>每一次循环就会调用 <code>doSetTimeout</code> 一次，同时 <code>doSetTimeout</code> 会给自己创建一个 <strong>不一样的、新的局部变量 <code>i</code></strong></li>
<li>等循环结束后，<code>doSetTimeout</code> 再打印出所有的 <strong>局部变量 <code>i</code></strong></li>
</ol>

<blockquote>
<p>注意这里仍然没有改变执行的顺序！最终的结果仍然是先打印出 6 个 <code>'End'</code>，再打印 <code>0 1 2 3 4 5</code>。</p>
</blockquote>

<p>当我们理解了上面的写法的时候，我们可以最后看一下在 <code>let</code> 还没有出来的时代，是怎么借助函数创建 <strong>块级局部变量</strong> 的，也就是我们的 <strong>第三种写法</strong>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js">    <span class="kd">var</span> <span class="nx">i</span>   <span class="c1">// 创建全局变量 i
</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span>   <span class="c1">// 创建局部变量 j
</span><span class="c1"></span>          <span class="nx">setTimeout</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span>
          <span class="p">}</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
      <span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;End&#39;</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>这里，我们使用了 <strong>立即执行函数</strong>：<code>(function(...){...})()</code>，这种写法表示我声明一个函数，并且马上执行他。当执行结束之后，因为这个函数没有名字，也没有将地址赋值给某个变量，因此我们没办法再从别的地方再调用他，相当于是“一次性函数”。</p>

<p><code>var</code> 的作用域是函数级作用域，因此每个函数里面的 <code>j</code> 都是不一样的，我们再一次聪明地用 <strong>局部变量</strong> 保存了每一次 <strong>全局变量</strong> 的变化！</p>

<blockquote>
<p>总结：这几种写法都是为了利用 <strong>局部作用域</strong> ——他们有的利用了 ES 6 为我们提供的 <strong><code>let</code></strong>，有的使用了 <strong>函数</strong> ——来保存每一次 <code>for 循环</code> 中 <strong>全局变量</strong> 不同的值，<strong>但是，他们均不会改变执行的顺序！</strong></p>
</blockquote>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/javascript/" term="JavaScript" label="JavaScript" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">浅析 URL</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-11-30-url/" />
            <id>http://hais-teatime.com/post/2019-11-30-url/</id>
            <updated>2020-01-28T11:35:42+08:00</updated>
            <published>2019-11-30T17:16:17+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[本文将介绍万维网三大技术之一的 URL，其实是自己的一个小 FAQ（笑）。]]></summary>
            
                <content type="html"><![CDATA[<p>本文将介绍万维网三大技术之一的 URL，其实是自己的一个小 FAQ（笑）。</p>

<h2 id="url-和-uri">URL 和 URI？</h2>

<p>URL 实际上是 URI 的一个子集，除识别资源外还提供定位资源的方法。</p>

<p>下面是一个 URI 的组成：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">                    hierarchical part
        ┌───────────────────┴─────────────────────┐
                    authority               path
        ┌───────────────┴───────────────┐┌───┴────┐
  abc://username:password@example.com:123/path/data?key=value&amp;key2=value2#fragid1
  └┬┘   └───────┬───────┘ └────┬────┘ └┬┘           └─────────┬─────────┘ └──┬──┘
scheme  user information     host     port                  query         fragment

  urn:example:mammal:monotreme:echidna
  └┬┘ └──────────────┬───────────────┘
scheme              path</code></pre></td></tr></table>
</div>
</div>
<p>举一个我们常见的 URL（URI） 的例子：</p>

<p><a href="https://zh.wikipedia.org/w/index.php?title=Special:随机页面#5" target="_blank">https://zh.wikipedia.org/w/index.php?title=Special:随机页面#5</a></p>

<ol>
<li><code>https</code>：协议</li>
<li><code>zh.wikipedia.org</code>：域名</li>
<li><code>/w/index.php</code>：路径（不同的页面）</li>
<li><code>?title=Special:随机页面</code>：查询参数（相同页面，不同内容）</li>
<li><code>#5</code>：锚点（相同页面，相同内容，不同位置）</li>
<li>其中若不写端口号，则表示使用 https 对应的默认端口号 443</li>
</ol>

<h2 id="nslookup">nslookup？</h2>

<p>直接使用可以查询到域名的 A 记录。比如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">nslookup hais-teatime.com</code></pre></td></tr></table>
</div>
</div>
<h2 id="顶级域名-二级域名">顶级域名？二级域名？</h2>

<p>比如对于 www.baidu.com</p>

<ul>
<li>顶级域名：com</li>
<li>二级域名：baidu.com</li>
<li>三级域名：www.baidu.com</li>
</ul>

<p>三级域名跟二级域名可以没关系，有可能都不是属于一家公司，注意辨别。</p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/url/" term="URL" label="URL" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">CSS 入门</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-11-30-css/" />
            <id>http://hais-teatime.com/post/2019-11-30-css/</id>
            <updated>2020-01-28T12:46:11+08:00</updated>
            <published>2019-11-30T14:47:37+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[随着网络的发展，人们开始对网页有了更多美学上的追求，希望网页能在提供基本的文字和图像信息的同时能够拥有美观、良好的排版，这也就促使 CSS（Cascading Style Sheets）不断发展，本文则将对现阶段所学 CSS 知识做一个简单的总结。]]></summary>
            
                <content type="html"><![CDATA[<p>随着网络的发展，人们开始对网页有了更多美学上的追求，希望网页能在提供基本的文字和图像信息的同时能够拥有美观、良好的排版，这也就促使 CSS（Cascading Style Sheets）不断发展，本文则将对现阶段所学 CSS 知识做一个简单的总结。</p>

<blockquote>
<p>大部分的内容是 <a href="http://jirengu.com" target="_blank">饥人谷</a> 方老师课上的讲的内容的总结，转载请注明。</p>
</blockquote>

<h2 id="基本概念">基本概念</h2>

<h3 id="文档流-normal-flow">文档流（Normal Flow）</h3>

<p>文档流的英文叫 <strong>Normal Flow</strong>，其实把它翻译成 <strong>正常布局流</strong> 更为合适。
当我们没有使用过任何 CSS 规则来改变元素的展现方式的时候，他们会按照正常的布局流来组织——也就是默认情况下的元素布局——这也就是我们所说的 <strong>Noraml Flow</strong>，即 <strong>文档流</strong> 。</p>

<p>我们可以修改元素的 <code>display</code> 属性，来为元素指定他的显示方式，通常我们可以将其值指定为 <code>inline</code> <code>block</code> 或 <code>inline-block</code>，下面将从 <strong>流动方向、宽度、高度</strong> 这三个方面来介绍 <code>display</code> 的三个值的不同特性。</p>

<h4 id="流动方向">流动方向</h4>

<ul>
<li><code>inline</code> 从左到右排列，行尾会截断成两行</li>
<li><code>block</code> 从上到下排列（每个占一行）</li>
<li><code>inline-block</code> 从左到右排列，行尾不会截断成两行</li>
</ul>

<h4 id="宽度">宽度</h4>

<ul>
<li><code>inline</code> 的宽度为里面所有 <code>inline</code> 元素之和，不接受指定 <code>width</code></li>
<li><code>block</code> 的宽度默认为 <code>auto</code>（这个值不是 100%），可以指定 <code>width</code>，<strong>但建议不要写 <code>width = 100%</code>，容易出 BUG</strong></li>
<li><code>inline-block</code> 的默认为里面所有 <code>inline</code> 元素之和，但接受指定 <code>width</code></li>
</ul>

<h4 id="高度">高度</h4>

<ul>
<li><code>inline</code> 的实际高度由行高（<code>line-height</code>）间接确定（与字体有关）；<code>padding</code> 只能改变看得见的高度（而不是实际高度）；如果没有内容，也有高度，其值为 <code>line-height</code>（具体内容可以参照方老师写的<a href="https://zhuanlan.zhihu.com/p/25808995?group_id=825729887779307520" target="_blank">这篇文章</a>）</li>
<li><code>block</code> 的高度由里面所有的 <strong>文档流元素</strong>（即还在 Normal Flow 的元素，下文会阐述什么情况下会 <a href="#脱离文档流">脱离文档流</a>）决定，也可以设置 <code>height</code>；如果没有内容，高度为 0</li>
<li><code>inline-block</code> 的高度由里面所有的 <strong>文档流元素</strong> 决定，也可以设置 <code>height</code></li>
</ul>

<h4 id="脱离文档流">脱离文档流</h4>

<p>目前有两种方式会使得元素脱离文档流，分别是：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css">    <span class="nt">position</span><span class="o">:</span> <span class="nt">absolute</span> <span class="o">|</span> <span class="nt">fixed</span><span class="o">;</span>
    <span class="c">/* OR */</span>
    <span class="nt">float</span><span class="o">:</span> <span class="nt">left</span> <span class="o">|</span> <span class="nt">right</span><span class="o">;</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="盒模型-box-model">盒模型（Box Model)</h3>

<p>事实上，我们可以把网页中显示的 HTML 元素看成是一个个盒子，盒子具有四层：</p>

<ul>
<li>内容（content）</li>
<li>内边距（padding）</li>
<li>边框（border）</li>
<li>外边距（margin）</li>
</ul>

<p>现在主要有两种盒模型，一种是 <code>content-box</code>，一种是 <code>border-box</code>。他们的主要区别在于：</p>

<ol>
<li>我们对 <strong>content-box</strong> 指定 <code>width</code> 或 <code>height</code> 时，说的是他的最里面的 <code>content</code> 的 宽或高；</li>
<li>而对 <strong>border-box</strong> 指定 <code>width</code> 或 <code>heihgt</code> 时，除了 <code>content</code> 的宽或高之外，还包括了 <code>padding</code> 和 <code>border</code> 的厚度。</li>
</ol>

<p>我们可以通过设定属性 <code>box-sizing: content-box | border-box</code>，来选择我们想使用的宽度计算方式。</p>

<h3 id="margin-合并"><code>margin</code> 合并</h3>

<p>是说我们上下两个元素若都有 margin，那么他们的 margin 将不会同时生效。有以下几个注意点：</p>

<ol>
<li>只有上下才会发生 <code>margin</code> 合并，左右不会发生</li>
<li>只有 <code>block</code> 会发生 <code>margin</code> 合并，<code>inline-block</code> 不会发生</li>
<li><code>first-child</code> 和 <code>last-child</code> 也会和 <code>parent</code> 发生 margin 合并</li>
</ol>

<p>取消 margin 合并的方法：</p>

<ol>
<li>使用 <code>overflow:hidden</code> 之后就不会再合并</li>
<li>使用 <code>display:flex</code> 之后就不会再合并</li>
<li>通过给 <code>parent</code> 上面加东西（<code>padding</code> <code>border</code> <code>overflow</code> 等）之后就不会再合并</li>
</ol>

<h3 id="浏览器的渲染过程">浏览器的渲染过程</h3>

<p>根据 <a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction" target="_blank">Google 团队的文章</a>分析，我们可以将网页的渲染过程大致分为以下几步：</p>

<ol>
<li>根据 HTML 构建 HTML 树（DOM）</li>
<li>根据 CSS 构建 CSS 树（CSSOM）</li>
<li>将两棵树合并为渲染树（Render Tree）</li>
<li>布局 <strong>Layout</strong>（文档流、盒模型、计算大小和位置）</li>
<li>绘制 <strong>Paint</strong>（边框颜色、文字颜色、阴影）</li>
<li>合成 <strong>Compose</strong>（根据层叠关系展示画面）</li>
</ol>

<p><img src="/images/render-tree-construction.png" alt="Render Tree Construction" /></p>

<p>同时我们知道，如果用 JS 对网页中的元素进行修改的话，将会引起网页的重新渲染，这里有三种网页内容的更新方式：</p>

<ul>
<li>JS &gt; Style &gt; <strong>Layout &gt; Paint &gt; Composite</strong>：remove</li>
<li>JS &gt; Style &gt; <strong>Paint &gt; Composite</strong>：改变背景颜色</li>
<li>JS &gt; Style &gt; <strong>Composite</strong>：transform</li>
</ul>

<h2 id="css-布局">CSS 布局</h2>

<p>布局是 CSS 的最重要的用途之一，也是众多新人苦手的地方，现在就来总结一下三种常用布局以及在什么地方使用他们。</p>

<h3 id="应该如何选用哪种布局方式">应该如何选用哪种布局方式？</h3>

<p>根据方老师的工作经验总结，我们可以通过以下问题来进行分析：</p>

<ol>
<li>需要兼容 IE 9 吗？

<ul>
<li>需要，使用 <strong>float 布局</strong>；左浮两个，固定宽度，不要响应式；记得 <strong>clearfix</strong>，必要时采用负 margin</li>
<li>不需要，往下看</li>
</ul></li>
<li>只兼容最新的浏览器吗？

<ul>
<li>是，使用 <strong>grid 布局</strong></li>
<li>不是，使用 <strong>flex布局</strong>，必要时采用负 margin</li>
</ul></li>
</ol>

<h3 id="float-布局">float 布局</h3>

<p>float 布局其实很简单，我们只需要做两步就可以了：</p>

<ol>
<li>在子元素上加 <code>float: left</code> 和 <code>width</code></li>

<li><p>在父元素上加 <code>class=&quot;clearfix&quot;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">.clearfix:after{
content: &#39;&#39;;
display: block;
clear: both;
}</code></pre></td></tr></table>
</div>
</div></li>
</ol>

<p>关于 float 布局也有一些经验：</p>

<ul>
<li>留一些空间或最后一个不设置 <code>width</code>（可以设置一个 <code>max-width</code>）</li>
<li>不需要考虑响应式，因为手机上没有 IE，这个布局是专门为 IE 准备的</li>
<li>在 IE 上有 BUG ：最左边浮动元素的 <code>margin-left</code> 会变成双倍

<ul>
<li>可以加一句兼容性写法：<code>_margin-left: ?px</code>;</li>
<li>也可以加上 <code>display: inline-block</code></li>
</ul></li>
<li>如果图片下面有空隙，加上 <code>vertical-align: middle | top</code> 就可以消除</li>
<li>float 元素外边距不合并</li>
</ul>

<h3 id="flex-布局">flex 布局</h3>

<p>我们可以通过 <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank">CSS Tricks</a> 的一个详细的教程来学习 flex 布局，下面还是做一下介绍以便后日复习。</p>

<h4 id="container">container</h4>

<ul>
<li>让一个元素变成 flex 容器：<code>display: flex | inline-flex</code></li>
<li>改变 itmes 的流动方向（主轴）：<code>flex-direction: row | row-reverse | colum | colum-reverse</code></li>
<li>改变折行：<code>flex-wrap: nowrap | wrap | wrap-revers</code></li>
<li>主轴的对齐方式：<code>justify-content: flex-start | flex-end | center | space-between | space-around | space-evenly</code></li>
<li>次轴对齐：<code>align-items: flex-start | flex-end | center | stretch（默认）</code></li>
<li>多行对齐（基本不用）：<code>align-content: flex-start | flex-end | center | strech | space-between | space-around</code></li>
</ul>

<h4 id="items">items</h4>

<ul>
<li><code>order</code>：改变显示顺序</li>
<li><code>flex-grow</code>：控制自己如何长胖（占多余所有空间的权重），默认是 0（尽可能窄）

<ul>
<li>导航栏常用左边 logo 和右边用户头像都是 0，中间是 1</li>
</ul></li>
<li><code>flex-shrink</code>：控制如何变瘦，（在空间不够用的时候，压缩的比例）默认是 1（大家一起变小），可以写 0（防止变小）</li>
<li><code>flex-basis</code>：控制基准宽度，一般用得比较少，默认是 <code>auto</code>（跟宽度一样）</li>
<li>以上可以缩写为：<code>flex: grow shrink basis</code></li>
<li><code>align-self: flex-start | flex-end</code></li>
</ul>

<h4 id="经验">经验</h4>

<ul>
<li>永远不要把 <code>width</code> 和 <code>height</code> 写死</li>
<li>尽量使用 <code>min-width | max-width</code> 等来写</li>
<li><code>margin-xxx: auto</code>，有奇效，类似于 <code>between</code></li>
</ul>

<h3 id="grid-布局">grid 布局</h3>

<p>同样对于 grid 布局，我们也可以通过 <a href="https://css-tricks.com/snippets/css/complete-guide-grid/" target="_blank">CSS Tricks</a> 来学习。</p>

<h4 id="container-1">container</h4>

<ul>
<li>让一个元素变成 grid 容器：<code>display: grid | inline-grid</code></li>
<li><code>grid-template-columns</code>: 每一列的宽度，可以写 <code>auto</code></li>
<li><code>grid-template-rows</code>: 每一行的高度，可以写 <code>auto</code></li>

<li><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">grid-template-areas:
&#34;header header header&#34;
&#34;aside main ad&#34;
&#34;footer footer&#34;</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<h4 id="items-1">items</h4>

<p><img src="/images/grid.png" alt="grid" /></p>

<h2 id="定位">定位</h2>

<p>定位也是 CSS 比较难以理解的部分，主要是需要记忆的内容比较多，有时候容易搞晕，在这里我们主要需要关注的有两个知识点：一是 <code>positon</code> 属性，二是 <strong>层叠上下文（The Stacking Context）</strong>。</p>

<h3 id="position-属性"><code>position</code> 属性</h3>

<p><code>position</code> 主要可以取以下几个值：</p>

<ul>
<li><code>static</code>：默认值，当前元素在文档流中</li>
<li><code>relative</code>：距离自己原来的位置的偏离（<code>top | left</code>），<strong>还是占据原来的空间</strong>，可以用来：

<ul>
<li>做位移</li>
<li>做 <code>absolute</code> 元素的 <code>parent</code></li>
<li>配合 <code>z-index</code>，默认是 <code>auto</code>，<code>auto</code> 计算出来的值为 <code>0</code></li>
</ul></li>
<li><code>absolute</code>：脱离原来的位置，另起一层；会相对于祖先元素中最近的一个 <strong>定位元素</strong>（即非 <code>static</code> 元素） 来进行定位

<ul>
<li>某些浏览器如果不写 <code>top | left</code> 会引起混乱</li>
<li>善用 <code>left: 100%</code>，善用 <code>left: 50%</code> 加 <code>负 margin</code></li>
</ul></li>
<li><code>fixed</code>：相对于 <strong>视口</strong> 定位，但是如果放到具有 <code>transform</code> 属性的元素里面，会有问题

<ul>
<li>某些浏览器如果不写 <code>top | left</code> 会引起混乱</li>
<li>手机上尽量不要使用 fixed</li>
</ul></li>
<li><code>sticky</code>：兼容性很差</li>
</ul>

<h3 id="层叠上下文-the-stacking-context">层叠上下文（The Stacking Context）</h3>

<p><img src="/images/the-stacking-context.png" alt="The Stacking Context" /></p>

<blockquote>
<p>我们假定用户正面向（浏览器）视窗或网页，而 HTML 元素沿着其相对于用户的一条虚构的 z 轴排开，<strong>层叠上下文</strong> 就是对这些 HTML 元素的一个 <strong>三维构想</strong>。众 HTML 元素基于其元素属性 <strong>按照优先级顺序</strong> 占据这个空间。</p>
</blockquote>

<p>默认的元素的三维层叠顺序如上图所示，可以看到定位元素会超出原来的高度范畴，换句话说，<strong>原来的 background、border、块级子元素、浮动元素、内联子元素均处在 z-index = -1 ~ 0 这个区间之内</strong>。</p>

<p>每一个层叠上下文就好像一个小世界，只有这里面的 <code>z-index</code> 才能进行比较，具有不同 <code>z-index</code> 的父元素之中的子元素根本无法同台竞技。</p>

<p>这些常见的属性（或元素）可以创建一个层叠上下文：</p>

<ul>
<li><code>HTML</code>（根元素）</li>
<li><code>z-index</code> 值不为 <code>auto</code> 的 <code>relative | absolute</code> 元素</li>
<li><code>z-index</code> 值不为 <code>auto</code> 的 <code>flex</code> <code>grid</code> 子项</li>
<li><code>transform</code> 值不为 <code>none</code> 的元素</li>
<li><code>opacity</code> 值小于 <code>1</code> 的元素</li>
</ul>

<p>更多资料可以查看 <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context" target="_blank">MDN 文档</a> 。</p>

<h2 id="动画">动画</h2>

<p>得益于 CSS 动画的帮助，我们的网页可以显得更加生动有趣，下面就我们常用的 CSS 动画的实现方式来进行简单的说明。</p>

<h3 id="变型-transform">变型 <code>transform</code></h3>

<p>值得注意的是，我们可以通过使用 JS 直接通过改变 CSS 样式（比如 <code>left: 50px</code>）来修改元素的大小、位置、方向等，但是这种效率非常低，网页需要不停地 <strong>repaint</strong>，而如果通过 <code>transform</code> 属性来进行修改，则不会 <strong>repaint</strong> 那么多次，将会大幅提高网页的流畅度。——整个浏览器的渲染过程我们已经在 <a href="#浏览器的渲染过程">前面</a> 讲过了。</p>

<p><code>transform</code> 属性可以取以下值:</p>

<ul>
<li>位移 translate：<code>translateX(50px) | translateY(50%) | translateZ(50px) | translate(50px, 50px)</code></li>
<li>视点的确定（在父元素上）：<code>perspective: 1000px</code>，表示父元素的中心为坐标原点，距离屏幕为 <code>1000px</code></li>
<li>缩放 scale：<code>scaleX(&lt;number&gt;) | scaleY(&lt;number&gt;) | scale(&lt;number&gt;, &lt;number&gt;?)</code>，<code>border</code> 也会一起变</li>
<li>旋转 rotate：<code>rotate([&lt;angle&gt;|&lt;zero&gt;]) | rotateZ([&lt;angle&gt;|&lt;zero&gt;]) | rotateX([&lt;angle&gt;|&lt;zero&gt;])</code>，一般用来做360度旋转的 loading 或者按钮的交互</li>
<li>扭曲 skew：<code>skewX(&lt;angle&gt;|&lt;zero&gt;) | skewY(&lt;angle&gt;|&lt;zero&gt;) | skew(&lt;angle&gt;|&lt;zero&gt;, &lt;angle&gt;|&lt;zero&gt;?)</code></li>
</ul>

<p>使用 <code>transform: none</code> 可以取消所有变化</p>

<p>此外，我们可以用 <code>top: 50%; left: 50%; transform(-50%, -50%)</code> 做绝对定位的居中</p>

<p><strong>然而， transform 只是静态的变型，而要实现动画，我们还需要使用下面介绍的 transition 或者 animation</strong></p>

<h3 id="过渡-transition">过渡 <code>transition</code></h3>

<p><code>transition</code> 可以合在一起这样写：</p>

<p><code>属性名(可以写all)</code> <code>时长</code> <code>过渡方式( linear | ease | ease-in | ease-in-out | cubic-bezier | step-start | step-end | steps )</code> <code>延迟</code></p>

<p>比如：</p>

<p><code>transition: width 2s linear 3s</code></p>

<p><strong>但请注意，不是所有属性都有过渡，比如：</strong></p>

<p><code>display: none =&gt; block</code></p>

<p>一般改成</p>

<p><code>visibility: hidden =&gt; visible</code></p>

<h3 id="动画-animation">动画 animation</h3>

<p><code>animation</code> 可以合在一起这样写：</p>

<p><code>时长</code> <code>过渡方式</code> <code>延迟</code> <code>次数( infinite )</code> <code>方向( reverse | alternate | alternate-reverse )</code> <code>填充模式( none | forwards | backwards | both)</code> <code>是否暂停(paused)</code> <code>自定义的动画名</code></p>

<p>在使用 animation 之前，我们需要先制作一个动画（添加关键帧），比如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">@</span><span class="k">keyframes</span> <span class="nt">自定义的动画名</span> <span class="p">{</span>
    <span class="nt">0</span><span class="o">%</span> <span class="p">{</span>
        <span class="k">transform</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nt">66</span><span class="p">.</span><span class="nc">66</span><span class="o">%</span> <span class="p">{</span>
        <span class="k">transform</span><span class="p">:</span> <span class="nb">translateX</span><span class="p">(</span><span class="mi">200</span><span class="kt">px</span><span class="p">)</span>
    <span class="p">}</span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/css/" term="CSS" label="CSS" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">HTML 入门与重难点标签</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-11-28-html/" />
            <id>http://hais-teatime.com/post/2019-11-28-html/</id>
            <updated>2020-01-28T11:35:42+08:00</updated>
            <published>2019-11-28T17:22:28+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[近四十年前，万维网（WWW）最初的构想于世界上诞生，现在已经融入了人们的日常生活之中，甚至可以说已然成为现代文明的重要组成部分。
将网址输入浏览器，回车得到想要的页面；亦或是点击一个链接，就可以看到想要的内容——理所当然，易如反掌，这就是我们所说的万维网。
这万维网之中，有三个核心技术：URI、HTTP 与 HTML，本文则将简单对其中的 HTML 及其部分重点标签进行介绍，作为笔记。]]></summary>
            
                <content type="html"><![CDATA[<p>近四十年前，万维网（WWW）最初的构想于世界上诞生，现在已经融入了人们的日常生活之中，甚至可以说已然成为现代文明的重要组成部分。</p>

<p>将网址输入浏览器，回车得到想要的页面；亦或是点击一个链接，就可以看到想要的内容——理所当然，易如反掌，这就是我们所说的万维网。</p>

<p>这万维网之中，有三个核心技术：URI、HTTP 与 HTML，本文则将简单对其中的 HTML 及其部分重点标签进行介绍，作为笔记。</p>

<h2 id="html-的历史">HTML 的历史</h2>

<p>1989年，李爵士（Berners-Lee）在一份备忘录中提出一个基于互联网的超文本系统；
1991年，李爵士公开了名为 HTML Tags 的文章中，在这篇文章中，他设计了18个元素（如今最新的 HTML 大概有110个标签），至此，HTML (HyperText Markup Language) 宣告诞生。
目前我们所使用的 HTML 5 于2014年10月28日作为 W3C 推荐标准发布。</p>

<h2 id="html-起手式">HTML 起手式</h2>

<p>用 <code>Emmet</code> 所提供的速写法可以很快地写出你在写 <code>HTML</code> 所需要写的一个骨架。
你只需要在安装了插件的编辑器（某些编辑器默认具有此功能）中输入 <code>!</code> 再敲击 <code>Tab</code>，便可以很方便地输入以下内容。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span> <span class="c">&lt;!--</span><span class="c"> 表示文档类型是 HTML 5 </span><span class="c">--&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p"></span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="c"> html 标签，可以在这里设置语言，比如 lang=&#34;zh</span><span class="c">-</span><span class="c">CN&#34; </span><span class="c">--&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p"></span><span class="p">&gt;</span>  <span class="c">&lt;!--</span><span class="c"> 这里的东西不会显示到页面上 </span><span class="c">--&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p"></span><span class="p">&gt;</span>  <span class="c">&lt;!--</span><span class="c"> 文件的字符编码 </span><span class="c">--&gt;</span>
    <span class="c">&lt;!--</span><span class="c"> 设置视口大小为设备宽度（以兼容手机），并设置初始缩放为 1.0 并禁用缩放 </span><span class="c">--&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&#34;</span><span class="p"></span><span class="p">&gt;</span> 
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;X-UA-Compatible&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;ie=edge&#34;</span><span class="p"></span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="c"> 让 IE 浏览器使用最新的内核 </span><span class="c">--&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p"></span><span class="p">&gt;</span>Document<span class="p">&lt;</span><span class="p">/</span><span class="nt">title</span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="c"> 标题 </span><span class="c">--&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">head</span><span class="p">&gt;</span> 
<span class="p">&lt;</span><span class="nt">body</span><span class="p"></span><span class="p">&gt;</span> <span class="c">&lt;!--</span><span class="c"> 内容 </span><span class="c">--&gt;</span>
    
<span class="p">&lt;</span><span class="p">/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="常用标签">常用标签</h2>

<h3 id="常用的表示章节的标签">常用的表示章节的标签</h3>

<p>在 HTML 5 强化语义之后，增加了一些表示章节的标签，通过对这些标签的合理使用，我们可以更好地优化页面的结构，与此同时也为盲人同胞提供了方便。
目前我们常用的标签有：</p>

<ul>
<li>标题 <code>&lt;h1&gt;</code>~<code>&lt;h6&gt;</code></li>
<li>章节 <code>&lt;section&gt;</code></li>
<li>文章 <code>&lt;article&gt;</code></li>
<li>段落 <code>&lt;p&gt;</code></li>
<li>头部 <code>&lt;header&gt;</code></li>
<li>脚部 <code>&lt;footer&gt;</code></li>
<li>主要内容 <code>&lt;main&gt;</code></li>
<li>旁支内容 <code>&lt;aside&gt;</code></li>
<li>划分 <code>&lt;div&gt;</code></li>
</ul>

<h3 id="常用的内容标签">常用的内容标签</h3>

<ul>
<li>有序列表 <code>&lt;ol&gt;</code> + <code>&lt;li&gt;</code></li>
<li>无序列表 <code>&lt;ul&gt;</code> + <code>&lt;li&gt;</code></li>
<li>描述 <code>&lt;dl&gt;</code> + <code>&lt;dt&gt;</code> + <code>&lt;dd&gt;</code>，其中 <code>&lt;dt&gt;</code> 表示描述词，<code>&lt;dd&gt;</code> 表示描述的内容（ <code>Emmet</code> 速写: <code>dl+</code>）</li>
<li>保留空格的段落 <code>&lt;pre&gt;</code></li>
<li>分割线 <code>&lt;hr&gt;</code></li>
<li>换行 <code>&lt;br&gt;</code></li>
<li>定位符、超链接 <code>&lt;a&gt;</code></li>
<li>语气的强调 <code>&lt;em&gt;</code></li>
<li>本质的强调 <code>&lt;strong&gt;</code></li>
<li>代码 <code>&lt;code&gt;</code>，默认是内联元素，可以用 <code>&lt;pre&gt;</code> 包住 <code>&lt;code&gt;</code></li>
<li>引用 <code>&lt;quote&gt;</code></li>
<li>块级引用 <code>&lt;blockquote&gt;</code></li>
</ul>

<h2 id="全局属性">全局属性</h2>

<ul>
<li><code>class</code> 类</li>
<li><code>contenteditable</code> 用户可以直接编辑页面上的东西</li>
<li><code>hidden</code> 隐藏</li>
<li><code>id</code> 标记</li>
<li><code>style</code> 样式</li>
<li><code>tabindex</code> 控制 <code>Tab键</code> 激活元素的顺序，<code>tabindex=0</code> 是最后一个，<code>tabindex=-1</code> 代表永远不会访问</li>
<li><code>title</code> 鼠标悬浮显示的内容</li>
</ul>

<h2 id="重点标签">重点标签</h2>

<h3 id="a-标签"><code>&lt;a&gt;</code> 标签</h3>

<h4 id="href-属性"><code>href</code> 属性</h4>

<ul>
<li>网址

<ul>
<li><code>http://google.com</code></li>
<li><code>https://google.com</code></li>
<li><code>//google.com</code> 无协议网址</li>
</ul></li>
<li>路径

<ul>
<li><code>/a/b/c</code> 绝对路径，但是是基于 <strong>HTTP 服务</strong> 开启的根目录，不是整个计算机的根目录</li>
<li><code>a/b/c</code> 相对路径，基于当前路径的目录</li>
<li><code>index.html</code> 当前目录的文件</li>
<li><code>./index.html</code> 当前目录的文件</li>
</ul></li>
<li><code>#id</code></li>
<li>伪协议

<ul>
<li><code>javascript:alert(1);</code></li>
<li><code>javasrcript:;</code> 可以写一个什么都不做的a标签</li>
<li><code>mailto:xxx@xxx.com</code> 会呼出邮件客户端</li>
<li><code>tel:1300000000</code> 会呼出拨号界面</li>
</ul></li>
</ul>

<h4 id="target-属性"><code>target</code> 属性</h4>

<ul>
<li>内置名字

<ul>
<li><code>_blank</code> 新标签</li>
<li><code>_top</code> 在最顶层打开（比如 <code>iframe</code> 的最外层页面）</li>
<li><code>_parent</code> 在父级窗口打开，没有 <code>_top</code> 那么高层</li>
<li><code>_self</code> 在当前页面打开（比如 <code>iframe</code> 的当前层）</li>
</ul></li>
<li>其他自定义的新窗口的名字或者 <code>iframe</code> 的名字</li>
</ul>

<h4 id="download-属性"><code>download</code> 属性</h4>

<p>下载，而不是查看网页，但是大部分都不支持</p>

<h3 id="iframe-标签"><code>iframe</code> 标签</h3>

<p>内嵌窗口，但是现在大都不用了</p>

<h3 id="table-标签"><code>&lt;table&gt;</code> 标签</h3>

<p>里面必须写<code>&lt;thead&gt;</code> <code>&lt;tbody&gt;</code> <code>&lt;tfoot&gt;</code>，否则浏览器也会自己加上，并且显示的顺序与实际写的这三个顺序无关，浏览器一定是按照<code>&lt;thead&gt;</code> <code>&lt;tbody&gt;</code> <code>&lt;tfoot&gt;</code>的顺序显示</p>

<p>相关的样式有：</p>

<ul>
<li><code>table-layout</code>

<ul>
<li><code>auto</code> 按照内容的多少来分配宽度权重</li>
<li><code>fixed</code> 等宽</li>
</ul></li>
<li><code>border-collapse: collapse</code> 表示两个单元格的边线合并</li>
<li><code>border-spacing</code> 两个单元格中间的空隙</li>
</ul>

<h3 id="img-标签"><code>&lt;img&gt;</code> 标签</h3>

<p>发出一个GET请求，展示一张图片</p>

<h4 id="src-属性"><code>src</code> 属性</h4>

<p>可以是相对路径，也可以是绝对路径</p>

<h4 id="alt-属性"><code>alt</code> 属性</h4>

<p>图片加载失败的时候显示的内容</p>

<h4 id="height-和-width-属性"><code>height</code> 和 <code>width</code> 属性</h4>

<p>若只写高度或宽度，图像比例保持不变</p>

<h4 id="事件">事件</h4>

<ul>
<li><code>onload</code>图片加载成功</li>
<li><code>onerror</code> 图片加载失败</li>
</ul>

<h4 id="响应式">响应式</h4>

<p><code>max-width: 100%</code></p>

<h3 id="form-标签"><code>&lt;form&gt;</code> 标签</h3>

<p>发出一个GET或POST请求，然后刷新页面</p>

<h4 id="action-属性"><code>action</code> 属性</h4>

<p>请求到哪个页面</p>

<h4 id="method-属性"><code>method</code> 属性</h4>

<h4 id="autocomplete-属性"><code>autocomplete</code> 属性</h4>

<p>为 <code>on</code> 则打开自动填充，下面的 <code>text</code> 要写 <code>name</code></p>

<h4 id="target-属性-1"><code>target</code> 属性</h4>

<p>把哪个页面（ 值可以为 <code>_blank</code> 等等）变成要请求到的那个页面（也就是说哪个页面需要刷新）</p>

<blockquote>
<p><code>&lt;input type=&quot;submit&quot;&gt;</code> 和 <code>&lt;button type=&quot;submit&quot;&gt;</code> 的区别？</p>

<ul>
<li>input里面不能再有标签（但是文字可以用 <code>value=&quot;&quot;</code> 进行更改）</li>
<li>button里面可以有任何东西（包括图片等其他标签）</li>
</ul>
</blockquote>

<h4 id="注意事项">注意事项</h4>

<ul>
<li>一般不监听 <code>input</code> 的 <code>click</code> 事件</li>
<li><code>form</code> 里面的 <code>input</code> 要有 <code>name</code></li>
<li>一个 <code>form</code> 必须要有一个 <code>type=&quot;submit&quot;</code>，如果 <code>button</code> 不写 <code>type</code>，默认为 <code>submit</code></li>
</ul>

<h3 id="input-标签"><code>&lt;input&gt;</code> 标签</h3>

<h4 id="type-属性"><code>type</code> 属性</h4>

<ul>
<li><code>text</code></li>
<li><code>color</code></li>
<li><code>password</code></li>
<li><code>radio</code> 所有的 <code>input</code> 要有同一个 <code>name</code></li>
<li><code>checkbox</code> 所有的 <code>input</code> 要有同一个 <code>name</code></li>
<li><code>file</code> 加上 <code>multiple</code> 属性可以同时选多个文件</li>
<li><code>hidden</code></li>
<li><code>tel</code></li>
<li><code>email</code></li>
<li><code>search</code></li>
</ul>

<h4 id="事件-1">事件</h4>

<ul>
<li><code>onchange</code></li>
<li><code>onfocus</code></li>
<li><code>onblur</code></li>
</ul>

<h3 id="textarea-标签"><code>&lt;textarea&gt;</code> 标签</h3>

<ul>
<li><code>style=&quot;resize: none&quot;</code> 让右下角不能拖动</li>
</ul>

<h3 id="select-标签"><code>&lt;select&gt;</code> 标签</h3>

<ul>
<li><code>&lt;option value=&quot;1&quot;&gt;星期一&lt;/option&gt;</code></li>
</ul>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/html/" term="HTML" label="HTML" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">使用 Hugo 搭建个人博客</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-11-24-hugo/" />
            <id>http://hais-teatime.com/post/2019-11-24-hugo/</id>
            <updated>2020-01-28T11:35:42+08:00</updated>
            <published>2019-11-24T15:17:20+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights>
    
    <summary type="html"><![CDATA[作为一名前端开发者，平时可能会经常需要用到个人博客来记录学到的新知识来进行消化和方便后续的回顾，在这里就介绍一下如何使用 Hugo 这个工具来快速搭建一个模板化的、维护起来较为简单的个人博客。当然，在这里我们还需要使用到 GitHub Pages。]]></summary>
            
                <content type="html"><![CDATA[<p>作为一名前端开发者，平时可能会经常需要用到个人博客来记录学到的新知识来进行消化和方便后续的回顾，在这里就介绍一下如何使用 Hugo 这个工具来快速搭建一个模板化的、维护起来较为简单的个人博客。当然，在这里我们还需要使用到 GitHub Pages。</p>

<h2 id="github-pages">GitHub Pages</h2>

<p>首先我们可能需要了解一下什么是 <a href="https://pages.github.com/" target="_blank">GitHub Pages</a> ：</p>

<blockquote>
<p>GitHub Pages 是一项静态站点托管服务，它直接从 GitHub 上的仓库获取 HTML、CSS 和 JavaScript 文件，通过构建过程运行文件，然后发布网站。</p>
</blockquote>

<p>也就是说通过 GitHub 的这项服务，我们可以通过这样的方式来展示自己的 <strong>个人主页</strong>（*这里只讨论个人主页，当然他也可以用来托管组织或项目页面），他的域名是 <code>http(s)://&lt;username&gt;.github.io</code>：</p>

<ol>
<li><strong>Create</strong>: 在 GitHub 中创建一个名为 <code>&lt;username&gt;.github.io</code> 的仓库</li>
<li><strong>Clone</strong>: 把这个仓库拷贝到本地</li>
<li><strong>Edit</strong>: 在仓库中创建 <code>index.html</code> 等你所有想要的可以用来构建网站的文件</li>
<li><strong>Push</strong>: 将这个本地仓库 <code>Push</code> 到 GitHub 中</li>
<li><strong>Success</strong>：打开 <code>&lt;username&gt;.github.io</code> 即可访问</li>
</ol>

<h2 id="hugo">Hugo</h2>

<p>简单来说， Hugo 是一个由 GO 语言实现的静态网站生成器，我们可以把 Hugo 生成的页面部署到 GitHub Pages 服务中。</p>

<p>我们可以参照 Hugo 的 <a href="https://gohugo.io/" target="_blank">官方文档</a> 来指导我们操作。</p>

<h3 id="第一步-安装-hugo">第一步：安装 Hugo</h3>

<p>这里以 Windows 版本为例，其他操作系统的安装方法可以参照官方文档。</p>

<ol>
<li><a href="https://github.com/gohugoio/hugo/releases" target="_blank">点击链接</a> ，下载对应的压缩文件，比如 hugo_0.59.1_Windows-64bit.zip</li>
<li>解压缩，将 hugo.exe 文件放到一个安全的目录下（最好不要有空格），比如 <code>C:\Software\hugo\</code> 中</li>
<li><code>此电脑</code> - 右键 - <code>属性</code> - <code>高级系统设置</code> - <code>高级</code> - <code>环境变量</code> - 双击 <code>PATH</code> - 将 <code>C:\Software\hugo\</code> 添加进去</li>
</ol>

<h3 id="第二步-创建一个网页-生成器">第二步：创建一个网页（生成器）</h3>

<p>打开命令行，在喜欢的地方执行:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hugo new site &lt;username&gt;.github.io-creator</code></pre></td></tr></table>
</div>
</div>
<p>上面的 <code>&lt;username&gt;.github.io-creator</code> 可以根据自己的需要进行更改，这一步是相当于创建了一个 Hugo 网页生成器</p>

<h3 id="第三步-添加默认主题">第三步：添加默认主题</h3>

<p>执行命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">git init
git submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke
cd &lt;username&gt;.github.io-creator
echo &#39;theme = &#34;ananke&#34;&#39; &gt;&gt; config.toml</code></pre></td></tr></table>
</div>
</div>
<h3 id="第四步-添加文章">第四步：添加文章</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hugo new posts/我的第一篇文章.md</code></pre></td></tr></table>
</div>
</div>
<h3 id="第五步-修改文章">第五步：修改文章</h3>

<p>将会打开这样的一个 <code>markdown</code> 文件，在下面编辑好了之后，将 <code>draft</code> 改为 <code>false</code> 然后保存。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">---
title: &#34;我的第一篇文章&#34;
date: 2019-03-26T08:47:11+01:00
draft: true
---
# 大家好！

这是我的第一篇文章</code></pre></td></tr></table>
</div>
</div>
<h3 id="第六步-修改配置">第六步：修改配置</h3>

<p>打开 <code>config.toml</code>，将会出现：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">baseURL = &#34;https://example.org/&#34;
languageCode = &#34;en-us&#34;
title = &#34;My New Hugo Site&#34;
theme = &#34;ananke&#34;</code></pre></td></tr></table>
</div>
</div>
<p>将其中的语言改为 <code>zh-Hans</code>，标题改为自己喜欢的标题即可</p>

<h3 id="第六步-运行-hugo-server">第六步：运行 Hugo Server</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hugo server -D</code></pre></td></tr></table>
</div>
</div>
<p>他会提示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">                   | EN
+------------------+----+
  Pages            | 10
  Paginator pages  |  0
  Non-page files   |  0
  Static files     |  3
  Processed images |  0
  Aliases          |  1
  Sitemaps         |  1
  Cleaned          |  0

Total in 11 ms
Watching for changes in /Users/bep/quickstart/{content,data,layouts,static,themes}
Watching for config changes in /Users/bep/quickstart/config.toml
Environment: &#34;development&#34;
Serving pages from memory
Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
Press Ctrl+C to stop</code></pre></td></tr></table>
</div>
</div>
<p>这样整个博客就将会被部署到本地服务器 <code>http://localhost:1313/</code> 上面了</p>

<h3 id="第七步-发布到-public">第七步：发布到 Public</h3>

<p>执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hugo -D</code></pre></td></tr></table>
</div>
</div>
<p>hugo 就会创建一个新的目录，叫做 Public ，接下来我们要做三件事：</p>

<ol>
<li>在 <code>&lt;username&gt;.github.io-creator</code> 里面创建 <code>.gitignore</code> 文件，在里面添加 <code>/public/</code></li>
<li>打开 <code>public</code> 目录，将 <code>public</code> 目录单独上传到 GitHub 中名为 <code>&lt;username&gt;.github.io</code> 中</li>
<li>打开 <code>http://&lt;username&gt;.github.io</code> 就可以看到自己的博客啦</li>
</ol>

<p><em>注意 GitHub Pages 服务会默认将 <code>&lt;username&gt;.github.io</code> 仓库中的 <code>Master</code> 分支里的内容放到页面上，GitHub Pages 相关的设置可以在仓库的 Settings 中的 GitHub Pages 里找到</em></p>]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/html/" term="HTML" label="HTML" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%89%8D%E7%AB%AF/" term="前端" label="前端" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%8D%9A%E5%AE%A2/" term="博客" label="博客" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">开博大吉</title>
            <link rel="alternate" type="text/html" href="http://hais-teatime.com/post/2019-11-22-new/" />
            <id>http://hais-teatime.com/post/2019-11-22-new/</id>
            <updated>2020-01-28T11:35:42+08:00</updated>
            <published>2019-11-22T17:55:49+08:00</published>
            <author>
                    <name>Harvey Zhang</name>
                    <uri>http://hais-teatime.com/</uri>
                    <email>Hyuain97@163.com</email>
                    </author>
            <rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html"><![CDATA[大家好 这是我的第一篇博客，希望以后能写出好文章哦]]></summary>
            
                <content type="html"><![CDATA[

<h1 id="大家好">大家好</h1>

<p>这是我的第一篇博客，希望以后能写出好文章哦</p>
]]></content>
            
            
            
            
            
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/categories/%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%BC%80%E5%A7%8B%E7%9A%84%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/" term="从小白开始的前端学习之旅" label="从小白开始的前端学习之旅" />
                            
                        
                    
                
                    
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%8D%9A%E5%AE%A2/" term="博客" label="博客" />
                            
                        
                            
                            
                            
                                <category scheme="http://hais-teatime.com/tags/%E5%85%A5%E9%97%A8/" term="入门" label="入门" />
                            
                        
                    
                
            
        </entry>
    
</feed>